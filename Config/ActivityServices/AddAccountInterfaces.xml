<?xml version="1.0" encoding="utf-8"?>
<MASConfig>
  <MASServices>
    <MASEventService Name="AddAccountEvents" AllowMultiple="true" IsPageNav="true" Description="The AddAccountEvents element contains methods necessary to the creation of an account">
      <WorkflowType>
		  <XomlFile>PageNav\Config\ActivityServices\Workflows\AddAccountWorkflow.xoml</XomlFile>
        <!--<AssemblyName>MetraCareWorkflowLibrary.dll</AssemblyName>
        <FullTypeName>MetraCareWorkflowLibrary.AddAccountWorkflow</FullTypeName>-->
      </WorkflowType>
      <DataTypeName>Account</DataTypeName>
      <EventMethods>
        
        <EventMethod Name="StartAddAccount" Description="Method to begin the process of adding an account" EventName="Start_AddAccount">
          <ParameterDefs>
            <Parameter Name="AccountId" Description="This is a ref parameter identifying the user account" Type="MetraTech.ActivityServices.Common.AccountIdentifier, MetraTech.ActivityServices.Common" InstanceIdentifier="true">
              <InternalName>AccountId</InternalName>
            </Parameter>
          </ParameterDefs>
        </EventMethod>

        <EventMethod Name="StartAddAccountWithTemplate" Description="Method to begin the process of adding an account using a template" EventName="Start_AddAccountWithTemplate">
          <ParameterDefs>
            <Parameter Name="AccountId" Description="This is a ref parameter identifying the user account" Type="MetraTech.ActivityServices.Common.AccountIdentifier, MetraTech.ActivityServices.Common" InstanceIdentifier="true">
              <InternalName>AccountId</InternalName>
            </Parameter>
            <Parameter Name="TemplateEffectiveDate" Description="Parameter identifying the timeframe during which the template is effective" Type="System.DateTime" Direction="In">
              <InternalName>TemplateEffectiveDate</InternalName>
            </Parameter>
            <Parameter Name="TemplateAccount" Description="Parameter provides a template for account creation" Type="MetraTech.ActivityServices.Common.AccountIdentifier, MetraTech.ActivityServices.Common.dll" Direction="In">
              <InternalName>TemplateAccount</InternalName>
            </Parameter>            
          </ParameterDefs>
        </EventMethod>

        <EventMethod Name="StartAddAccountOfType" Description="Method to begin the process of adding an account with a defined type" EventName="Start_AddAccountOfType">
          <ParameterDefs>
            <Parameter Name="AccountId" Description="This is a ref parameter identifying the user account" Type="MetraTech.ActivityServices.Common.AccountIdentifier, MetraTech.ActivityServices.Common" InstanceIdentifier="true">
              <InternalName>AccountId</InternalName>
            </Parameter>
            <Parameter Name="SelectedAccountType" Description="Parameter to define selected account type" Type="System.String">
              <InternalName>SelectedAccountType</InternalName>
            </Parameter>
            <Parameter Name="ParentAccountId" Description="Id of parent account" Type="System.Int32" Direction="In">
              <InternalName>ParentAccountId</InternalName>
            </Parameter>
            <Parameter Name="ParentAccountName" Description="Name of parent account" Type="System.String" Direction="In">
              <InternalName>ParentAccountName</InternalName>
            </Parameter>
          </ParameterDefs>
        </EventMethod>    
        
        <EventMethod Name="SelectAccountType" Description="The AddAccount method allows clients to add new accounts to the MetraNet system" EventName="OK_SelectAccountType">
          <ParameterDefs>
            <Parameter Name="AccountId" Description="This is a ref parameter identifying the user account" Type="MetraTech.ActivityServices.Common.AccountIdentifier, MetraTech.ActivityServices.Common" InstanceIdentifier="true">
              <InternalName>AccountId</InternalName>
            </Parameter>
            <Parameter Name="SelectedAccountType" Description="Parameter to select account type" Type="System.String">
              <InternalName>SelectedAccountType</InternalName>
            </Parameter>
          </ParameterDefs>
        </EventMethod>

        <EventMethod Name="AddAccount" Description="The AddAccount method allows clients to add new accounts to the MetraNet system" EventName="OK_AddAccount">
          <ParameterDefs>
            <Parameter Name="AccountId" Description="This is a ref parameter identifying the user account" Type="MetraTech.ActivityServices.Common.AccountIdentifier, MetraTech.ActivityServices.Common" InstanceIdentifier="true">
              <InternalName>AccountId</InternalName>
            </Parameter>
            <Parameter Name="Account" Description="Parameter specifying an account to be added" Type="MetraTech.DomainModel.BaseTypes.Account, MetraTech.DomainModel.BaseTypes.dll">
              <InternalName>Account</InternalName>
            </Parameter>
            <Parameter Name="NewAccountId" Description="The output of this method is a generated account id" Type="System.Int32" Direction="Out">
              <InternalName>NewAccountId</InternalName>
            </Parameter>
            <Parameter Name="SendEmail" Description="Boolean variable communicating whether or not to send an email  to the new account" Type="System.Boolean" Direction="In">
              <InternalName>SendEmail</InternalName>
            </Parameter>
            <Parameter Name="ApplyAccountTemplates" Description="Method checks this parameter and applies a template if true" Type="System.Boolean" Direction="In">
              <InternalName>ApplyAccountTemplates</InternalName>
            </Parameter>
          </ParameterDefs>
        </EventMethod>

        <EventMethod Name="CancelAddAccount" Description="Method aborts the creation of a new account if called" EventName="Cancel_AddAccount">
          <ParameterDefs>
            <Parameter Name="AccountId" Description="This is a ref parameter identifying the user account" Type="MetraTech.ActivityServices.Common.AccountIdentifier, MetraTech.ActivityServices.Common" InstanceIdentifier="true">
              <InternalName>AccountId</InternalName>
            </Parameter>
          </ParameterDefs>
        </EventMethod>

        <EventMethod Name="GeneratePassword" Description="Method to generate a password for the new account" EventName="GeneratePassword_AddAccount">
          <ParameterDefs>
            <Parameter Name="AccountId" Description="This is a ref parameter identifying the user account" Type="MetraTech.ActivityServices.Common.AccountIdentifier, MetraTech.ActivityServices.Common" InstanceIdentifier="true">
              <InternalName>AccountId</InternalName>
            </Parameter>

            <Parameter Name="Password" Description="Output parameter defined as the generated password" Type="System.String" Direction="Out">
              <InternalName>Password</InternalName>
            </Parameter>            
          </ParameterDefs>
        </EventMethod>

      </EventMethods>
      
      <SupportedChildTypes>
        <ChildType>MetraTech.DomainModel.BaseTypes.Account, MetraTech.DomainModel.BaseTypes.dll</ChildType>
        <ChildType>System.Collections.Generic.List`1[[MetraTech.DomainModel.BaseTypes.PriceList, MetraTech.DomainModel.BaseTypes]]</ChildType>
        <ChildType>System.Collections.ArrayList</ChildType>
      </SupportedChildTypes>
      
    </MASEventService>
  </MASServices>
</MASConfig>
