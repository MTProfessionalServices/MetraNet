<ns0:UpdateAccountWorkflow ApplyAccountTemplates="False" PriceListColl="{p1:Null}" PageStateGuid="00000000-0000-0000-0000-000000000000" BillToContactView="{p1:Null}" x:Name="UpdateAccountWorkflow" CompletedStateName="EndUpdateAccount" Account="{x:Null}" UpdateAccountId="{x:Null}" DynamicUpdateCondition="{x:Null}" ChangeRequest="{x:Null}" InitialStateName="StartUpdateAccount" IsApprovalEnabled="False" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/workflow" xmlns:ns2="clr-namespace:MetraTech.ActivityServices.Activities;Assembly=MetraTech.ActivityServices.Activities, Version=6.7.0.0, Culture=neutral, PublicKeyToken=a0f5c26dbec45a75" xmlns:ns3="clr-namespace:MetraTech.Core.Services.ProxyActivities;Assembly=MetraTech.Core.Services.ProxyActivities, Version=0.0.0.0, Culture=neutral, PublicKeyToken=a0f5c26dbec45a75" xmlns:ns4="clr-namespace:MetraTech.Account.ProxyActivities;Assembly=MetraTech.Account.ProxyActivities, Version=0.0.0.0, Culture=neutral, PublicKeyToken=a0f5c26dbec45a75" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:p1="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:ns0="clr-namespace:MetraCareWorkflowLibrary;Assembly=MetraCareWorkflowLibrary">
	<StateActivity x:Name="StartUpdateAccount">
		<EventDrivenActivity x:Name="Start_UpdateAccount">
			<ns2:MTHandleEventActivity x:Name="mtHandleEventActivity1" EventName="Start_UpdateAccount" />
			<CodeActivity x:Name="LoadAccountActivity" ExecuteCode="{ActivityBind UpdateAccountWorkflow,Path=LoadAccountActivity_ExecuteCode}" />
			<ns3:AccountService_LoadAccountWithViews_ClientActivity In_acct="{ActivityBind UpdateAccountWorkflow,Path=UpdateAccountId}" In_timeStamp="{ActivityBind UpdateAccountWorkflow,Path=LoadAccount_Timestamp}" Out_account="{ActivityBind UpdateAccountWorkflow,Path=Account}" x:Name="accountServices_LoadAccountWithViews_ClientActivity1" />
			<CodeActivity x:Name="AddBillTo" ExecuteCode="{ActivityBind UpdateAccountWorkflow,Path=AddBillTo_ExecuteCode}" />
			<SetStateActivity x:Name="setStateActivity1" TargetStateName="GotoAccountPageForType" />
			<FaultHandlersActivity x:Name="faultHandlersActivity1">
				<FaultHandlerActivity x:Name="faultHandlerActivity1" FaultType="{x:Type p15:Exception}" xmlns:p15="clr-namespace:System;Assembly=mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
					<ns2:MTFaultHandlingActivity x:Name="mtFaultHandlingActivity1" Exception="{ActivityBind faultHandlerActivity1,Path=Fault}" />
				</FaultHandlerActivity>
			</FaultHandlersActivity>
		</EventDrivenActivity>
	</StateActivity>
	<ns2:MTPageStateActivity x:Name="UpdateAccount" PageName="/MetraNet/Account/UpdateAccount.aspx">
		<StateInitializationActivity x:Name="Init_UpdateAccount">
			<ns3:PriceListService_LoadPriceLists_ClientActivity x:Name="priceListService_LoadPriceLists_ClientActivity1" Out_priceListColl="{ActivityBind UpdateAccountWorkflow,Path=PriceListColl}" />
			<ns2:MTStateInitOutputActivity x:Name="mtStateInitOutputActivity2" />
		</StateInitializationActivity>
		<EventDrivenActivity x:Name="OK_UpdateAccount">
			<ns2:MTHandleEventActivity x:Name="mtHandleEventActivity3" EventName="OK_UpdateAccount" />
			<CodeActivity x:Name="PayerAndAncestorCheck1" ExecuteCode="{ActivityBind UpdateAccountWorkflow,Path=PayerAndAncestorCheck1_ExecuteCode}" />
			<CodeActivity x:Name="codeActivity1" ExecuteCode="{ActivityBind UpdateAccountWorkflow,Path=ApprovalSetup_ExecuteCode}" />
			<IfElseActivity x:Name="ifElseActivity1">
				<IfElseBranchActivity x:Name="ifElseBranchActivity1">
					<IfElseBranchActivity.Condition>
						<RuleConditionReference ConditionName="IsApprovalsOn" />
					</IfElseBranchActivity.Condition>
					<ns3:ApprovalManagementService_SubmitChange_ClientActivity Out_changeId="0" x:Name="approvalManagementService_SubmitChange_ClientActivity1" In_change="{ActivityBind UpdateAccountWorkflow,Path=ChangeRequest}" />
					<SetStateActivity x:Name="setStateActivity10" TargetStateName="Dashboard" />
				</IfElseBranchActivity>
				<IfElseBranchActivity x:Name="ifElseBranchActivity2">
					<ns4:AccountCreation_UpdateAccount_ClientActivity x:Name="accountCreation_UpdateAccount_ClientActivity1" In_ApplyAccountTemplate="{ActivityBind UpdateAccountWorkflow,Path=ApplyAccountTemplates}" In_Account="{ActivityBind UpdateAccountWorkflow,Path=Account}" />
				</IfElseBranchActivity>
			</IfElseActivity>
			<SetStateActivity x:Name="setStateActivity4" TargetStateName="AccountUpdated" />
			<FaultHandlersActivity x:Name="faultHandlersActivity2">
				<FaultHandlerActivity x:Name="faultHandlerActivity2" FaultType="{x:Type p15:Exception}" xmlns:p15="clr-namespace:System;Assembly=mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
					<ns2:MTFaultHandlingActivity x:Name="mtFaultHandlingActivity2" Exception="{ActivityBind faultHandlerActivity2,Path=Fault}" />
				</FaultHandlerActivity>
			</FaultHandlersActivity>
		</EventDrivenActivity>
		<EventDrivenActivity x:Name="Cancel_UpdateAccount">
			<ns2:MTHandleEventActivity x:Name="mtHandleEventActivity2" EventName="Cancel_UpdateAccount" />
			<SetStateActivity x:Name="setStateActivity7" TargetStateName="Dashboard" />
			<FaultHandlersActivity x:Name="faultHandlersActivity3">
				<FaultHandlerActivity x:Name="faultHandlerActivity3" FaultType="{x:Type p15:Exception}" xmlns:p15="clr-namespace:System;Assembly=mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
					<ns2:MTFaultHandlingActivity x:Name="mtFaultHandlingActivity3" Exception="{ActivityBind faultHandlerActivity3,Path=Fault}" />
				</FaultHandlerActivity>
			</FaultHandlersActivity>
		</EventDrivenActivity>
	</ns2:MTPageStateActivity>
	<ns2:MTPageStateActivity x:Name="Dashboard" PageName="/MetraNet/Welcome.aspx">
		<StateInitializationActivity x:Name="Init_Dashboard">
			<ns2:MTStateInitOutputActivity x:Name="mtStateInitOutputActivity1" />
			<SetStateActivity x:Name="setStateActivity2" TargetStateName="EndUpdateAccount" />
		</StateInitializationActivity>
	</ns2:MTPageStateActivity>
	<StateActivity x:Name="EndUpdateAccount" />
	<ns2:MTPageStateActivity x:Name="AccountUpdated" PageName="/MetraNet/Account/AccountUpdated.aspx">
		<StateInitializationActivity x:Name="Init_AccountUpdated">
			<ns2:MTStateInitOutputActivity x:Name="mtStateInitOutputActivity3" />
			<SetStateActivity x:Name="setStateActivity5" TargetStateName="EndUpdateAccount" />
		</StateInitializationActivity>
	</ns2:MTPageStateActivity>
	<EventDrivenActivity x:Name="SetStateEventHandler">
		<ns2:MTHandleEventActivity x:Name="mtHandleEventActivity7" EventName="SetStateEvent" />
		<ns2:MTSetPageStateActivity x:Name="mtSetPageStateActivity1" StateGuid="{ActivityBind UpdateAccountWorkflow,Path=PageStateGuid}" />
		<FaultHandlersActivity x:Name="faultHandlersActivity4">
			<FaultHandlerActivity x:Name="faultHandlerActivity4" FaultType="{x:Type p13:Exception}" xmlns:p13="clr-namespace:System;Assembly=mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
				<ns2:MTFaultHandlingActivity x:Name="mtFaultHandlingActivity4" Exception="{ActivityBind faultHandlerActivity4,Path=Fault}" />
			</FaultHandlerActivity>
		</FaultHandlersActivity>
	</EventDrivenActivity>
	<ns2:MTPageStateActivity x:Name="UpdateSystemAccount" PageName="/MetraNet/Account/UpdateSystemAccount.aspx">
		<StateInitializationActivity x:Name="Init_UpdateSystemAccount">
			<ns2:MTStateInitOutputActivity x:Name="mtStateInitOutputActivity4" />
		</StateInitializationActivity>
		<EventDrivenActivity x:Name="OK_UpdateSystemAccount">
			<ns2:MTHandleEventActivity x:Name="mtHandleEventActivity4" EventName="OK_UpdateAccount" />
			<CodeActivity x:Name="PayerAndAncestorCheck2" ExecuteCode="{ActivityBind UpdateAccountWorkflow,Path=PayerAndAncestorCheck1_ExecuteCode}" />
			<CodeActivity x:Name="codeActivity2" ExecuteCode="{ActivityBind UpdateAccountWorkflow,Path=ApprovalSetup_ExecuteCode}" />
			<IfElseActivity x:Name="ifElseActivity2">
				<IfElseBranchActivity x:Name="ifElseBranchActivity3">
					<IfElseBranchActivity.Condition>
						<RuleConditionReference ConditionName="IsApprovalsOn" />
					</IfElseBranchActivity.Condition>
					<ns3:ApprovalManagementService_SubmitChange_ClientActivity Out_changeId="0" x:Name="approvalManagementService_SubmitChange_ClientActivity2" In_change="{ActivityBind UpdateAccountWorkflow,Path=ChangeRequest}" />
					<SetStateActivity x:Name="setStateActivity11" TargetStateName="Dashboard" />
				</IfElseBranchActivity>
				<IfElseBranchActivity x:Name="ifElseBranchActivity4">
					<ns4:AccountCreation_UpdateAccount_ClientActivity x:Name="accountCreation_UpdateAccount_ClientActivity4" In_ApplyAccountTemplate="{ActivityBind UpdateAccountWorkflow,Path=ApplyAccountTemplates}" In_Account="{ActivityBind UpdateAccountWorkflow,Path=Account}" />
				</IfElseBranchActivity>
			</IfElseActivity>
			<SetStateActivity x:Name="setStateActivity3" TargetStateName="AccountUpdated" />
			<FaultHandlersActivity x:Name="faultHandlersActivity5">
				<FaultHandlerActivity x:Name="faultHandlerActivity5" FaultType="{x:Type p15:Exception}" xmlns:p15="clr-namespace:System;Assembly=mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
					<ns2:MTFaultHandlingActivity x:Name="mtFaultHandlingActivity5" Exception="{ActivityBind faultHandlerActivity5,Path=Fault}" />
				</FaultHandlerActivity>
			</FaultHandlersActivity>
		</EventDrivenActivity>
		<EventDrivenActivity x:Name="Cancel_UpdateSystemAccount">
			<ns2:MTHandleEventActivity x:Name="mtHandleEventActivity5" EventName="Cancel_UpdateAccount" />
			<SetStateActivity x:Name="setStateActivity6" TargetStateName="Dashboard" />
			<FaultHandlersActivity x:Name="faultHandlersActivity6">
				<FaultHandlerActivity x:Name="faultHandlerActivity6" FaultType="{x:Type p15:Exception}" xmlns:p15="clr-namespace:System;Assembly=mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
					<ns2:MTFaultHandlingActivity x:Name="mtFaultHandlingActivity6" Exception="{ActivityBind faultHandlerActivity6,Path=Fault}" />
				</FaultHandlerActivity>
			</FaultHandlersActivity>
		</EventDrivenActivity>
	</ns2:MTPageStateActivity>
	<StateActivity x:Name="GotoAccountPageForType">
		<StateInitializationActivity x:Name="Init_GotoAccountPageForType">
			<ns2:MTSwitch x:Name="SwithOnAccountType">
				<ns2:MTSwitch.Expression>
					<ActivityBind Path="Account.AccountType" Name="UpdateAccountWorkflow" />
				</ns2:MTSwitch.Expression>
				<SetStateActivity x:Name="Case_CoreSubscriber" TargetStateName="UpdateAccount">
					<ns2:MTSwitch.Cases>
						<ActivityBind Path="CONST_CoreSubscriber" Name="UpdateAccountWorkflow" />
					</ns2:MTSwitch.Cases>
				</SetStateActivity>
				<SetStateActivity x:Name="Case_IndependentAccount" TargetStateName="UpdateAccount">
					<ns2:MTSwitch.Cases>
						<ActivityBind Path="CONST_IndependentAccount" Name="UpdateAccountWorkflow" />
					</ns2:MTSwitch.Cases>
				</SetStateActivity>
				<SetStateActivity x:Name="Case_DepartmentAccount" TargetStateName="UpdateAccount">
					<ns2:MTSwitch.Cases>
						<ActivityBind Path="CONST_DepartmentAccount" Name="UpdateAccountWorkflow" />
					</ns2:MTSwitch.Cases>
				</SetStateActivity>
				<SetStateActivity x:Name="Case_CorporateAccount" TargetStateName="UpdateAccount">
					<ns2:MTSwitch.Cases>
						<ActivityBind Path="CONST_CorporateAccount" Name="UpdateAccountWorkflow" />
					</ns2:MTSwitch.Cases>
				</SetStateActivity>
				<SetStateActivity x:Name="Case_SystemAccount" TargetStateName="UpdateSystemAccount">
					<ns2:MTSwitch.Cases>
						<ActivityBind Path="CONST_SystemAccount" Name="UpdateAccountWorkflow" />
					</ns2:MTSwitch.Cases>
				</SetStateActivity>
				<SetStateActivity x:Name="Default_Case_GenericAccount" TargetStateName="UpdateAccount" />
			</ns2:MTSwitch>
		</StateInitializationActivity>
	</StateActivity>
	<ns2:MTPageStateActivity x:Name="GenericUpdateAccount" PageName="/MetraNet/Account/GenericUpdateAccount.aspx">
		<StateInitializationActivity x:Name="Init_GenericUpdateAccount">
			<ns3:PriceListService_LoadPriceLists_ClientActivity x:Name="priceListService_LoadPriceLists_ClientActivity2" Out_priceListColl="{ActivityBind UpdateAccountWorkflow,Path=PriceListColl}" />
			<ns2:MTStateInitOutputActivity x:Name="mtStateInitOutputActivity5" />
		</StateInitializationActivity>
		<EventDrivenActivity x:Name="OK_GenericUpdateAccount">
			<ns2:MTHandleEventActivity x:Name="mtHandleEventActivity6" EventName="OK_UpdateAccount" />
			<CodeActivity x:Name="PayerAndAncestorCheck3" ExecuteCode="{ActivityBind UpdateAccountWorkflow,Path=PayerAndAncestorCheck1_ExecuteCode}" />
			<CodeActivity x:Name="codeActivity3" ExecuteCode="{ActivityBind UpdateAccountWorkflow,Path=ApprovalSetup_ExecuteCode}" />
			<IfElseActivity x:Name="ifElseActivity3">
				<IfElseBranchActivity x:Name="ifElseBranchActivity5">
					<IfElseBranchActivity.Condition>
						<RuleConditionReference ConditionName="IsApprovalsOn" />
					</IfElseBranchActivity.Condition>
					<ns3:ApprovalManagementService_SubmitChange_ClientActivity Out_changeId="0" x:Name="approvalManagementService_SubmitChange_ClientActivity3" In_change="{ActivityBind UpdateAccountWorkflow,Path=ChangeRequest}" />
					<SetStateActivity x:Name="setStateActivity12" TargetStateName="Dashboard" />
				</IfElseBranchActivity>
				<IfElseBranchActivity x:Name="ifElseBranchActivity6">
					<ns4:AccountCreation_UpdateAccount_ClientActivity x:Name="accountCreation_UpdateAccount_ClientActivity2" In_ApplyAccountTemplate="{ActivityBind UpdateAccountWorkflow,Path=ApplyAccountTemplates}" In_Account="{ActivityBind UpdateAccountWorkflow,Path=Account}" />
				</IfElseBranchActivity>
			</IfElseActivity>
			<SetStateActivity x:Name="setStateActivity8" TargetStateName="AccountUpdated" />
			<FaultHandlersActivity x:Name="faultHandlersActivity7">
				<FaultHandlerActivity x:Name="faultHandlerActivity7" FaultType="{x:Type p15:Exception}" xmlns:p15="clr-namespace:System;Assembly=mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
					<ns2:MTFaultHandlingActivity x:Name="mtFaultHandlingActivity7" Exception="{ActivityBind faultHandlerActivity7,Path=Fault}" />
				</FaultHandlerActivity>
			</FaultHandlersActivity>
		</EventDrivenActivity>
		<EventDrivenActivity x:Name="Cancel_GenericUpdateAccount">
			<ns2:MTHandleEventActivity x:Name="mtHandleEventActivity8" EventName="Cancel_UpdateAccount" />
			<SetStateActivity x:Name="setStateActivity9" TargetStateName="Dashboard" />
			<FaultHandlersActivity x:Name="faultHandlersActivity8">
				<FaultHandlerActivity x:Name="faultHandlerActivity8" FaultType="{x:Type p15:Exception}" xmlns:p15="clr-namespace:System;Assembly=mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
					<ns2:MTFaultHandlingActivity x:Name="mtFaultHandlingActivity8" Exception="{ActivityBind faultHandlerActivity8,Path=Fault}" />
				</FaultHandlerActivity>
			</FaultHandlersActivity>
		</EventDrivenActivity>
	</ns2:MTPageStateActivity>
</ns0:UpdateAccountWorkflow>