<?xml version="1.0" encoding="UTF-8"?>
<xmlconfig>
<EndOfPeriodReports>
	<Report>
		<UniqueName>Invoice Report</UniqueName>
		<!-- directory relative to extension directory -->
		<SourceFile>Reporting\Config\Templates\Invoice.rpt</SourceFile>
		<DisplayName>Invoice Report DisplayName (Invoice.rpt)</DisplayName>
		<!--
			If this flag is set to true, then BeginGenerateReports adapter will ignore
			report destination, which was specified on the report template, and set the destination
			to be Disk. This flag should be set to false if an SI decides to send reports to other
			then Disk destination (like email)
		-->
		<OverwriteReportTemplateDestination>true</OverwriteReportTemplateDestination>
		<!--
			If this flag is set to true, then BeginGenerateReports adapter will ignore
			report file format, which was specified on the report template, and set the format
			to be PDF. This flag should be set to false if an SI decides to generate reports in any other
			format
		-->
		<OverwriteReportTemplateFormat>true</OverwriteReportTemplateFormat>
		<!--
			If this flag is set to true, then BeginGenerateReports adapter will ignore
			report datasorice, which was specified on the report template, and set the destination
			data source, otherwise it will leave original data source intact and only specify user name and
			password
		-->
		<OverwriteReportOriginalDataSource>true</OverwriteReportOriginalDataSource>
		<InputQuery>
		   <![CDATA[
			SELECT inv.id_acc as AccountID,
			'{sub_invoice_subreport;1.AccountID} = ' + CAST(inv.id_acc AS VARCHAR(10))  AS RecordSelectionFormula,
			CAST(id_interval AS VARCHAR(10)) + '/' + CAST(inv.id_acc AS VARCHAR(10)) + '/' + 'Invoice.pdf' AS InstanceFileName,
			--parameters
			'0' AS Sample
			--inv.id_invoice AS invoiceid
			FROM t_invoice inv
			inner join t_billgroup_member bgm
			on inv.id_acc = bgm.id_acc
			inner join t_billgroup bg
			on inv.id_interval = bg.id_usage_interval
			and bg.id_billgroup = %%ID_BILLGROUP%% 
			inner join t_av_internal av
			on inv.id_acc = av.id_acc
			inner join t_enum_data ed
			on ed.id_enum_data = av.c_InvoiceMethod
			left outer join t_av_contact av_country
			on inv.id_acc = av_country.id_acc
			left outer join t_enum_data ed_country
			on ed_country.id_enum_data = av_country.c_country
			left outer join t_enum_data ed_contacttype
			on av_country.c_contacttype = ed_contacttype.id_enum_data
			WHERE ed.nm_enum_data <> 'metratech.com/accountcreation/InvoiceMethod/None'
			and (ed_country.nm_enum_data is NULL OR ed_country.nm_enum_data <> 'Global/CountryName/Japan')
			and ed_contacttype.nm_enum_data = 'metratech.com/accountcreation/contacttype/bill-to'
			and bgm.id_billgroup = %%ID_BILLGROUP%% 
	  	  ]]>
		</InputQuery>
		<SampleModeInputQuery>
		   <![CDATA[
			SELECT TOP 10 inv.id_acc as AccountID,
			'{sub_invoice_subreport;1.AccountID} = ' + CAST(inv.id_acc AS VARCHAR(10))  AS RecordSelectionFormula,
			CAST(id_interval AS VARCHAR(10)) + '/' + CAST(inv.id_acc AS VARCHAR(10)) + '/' + 'Invoice.pdf' AS InstanceFileName,
			--parameters
			'1' AS Sample
			--inv.id_invoice AS invoiceid
			FROM t_invoice inv
			inner join t_billgroup_member bgm
			on inv.id_acc = bgm.id_acc
			inner join t_billgroup bg
			on inv.id_interval = bg.id_usage_interval
			and bg.id_billgroup = %%ID_BILLGROUP%% 
			inner join t_av_internal av
			on inv.id_acc = av.id_acc
			inner join t_enum_data ed
			on ed.id_enum_data = av.c_InvoiceMethod
			left outer join t_av_contact av_country
			on inv.id_acc = av_country.id_acc
			left outer join t_enum_data ed_country
			on ed_country.id_enum_data = av_country.c_country
			left outer join t_enum_data ed_contacttype
			on av_country.c_contacttype = ed_contacttype.id_enum_data
			WHERE ed.nm_enum_data <> 'metratech.com/accountcreation/InvoiceMethod/None'
			and (ed_country.nm_enum_data is NULL OR ed_country.nm_enum_data <> 'Global/CountryName/Japan')
			and ed_contacttype.nm_enum_data = 'metratech.com/accountcreation/contacttype/bill-to'
			and bgm.id_billgroup = %%ID_BILLGROUP%% 
	  	  ]]>
		</SampleModeInputQuery>
	</Report>
	<Report>
		<UniqueName>Invoice Report Japanese</UniqueName>
		<!-- directory relative to extension directory -->
		<SourceFile>Reporting\Config\Templates\Invoice_Jpn.rpt</SourceFile>
		<DisplayName>Invoice Report Japanese DisplayName (Invoice.rpt)</DisplayName>
		<!--
			If this flag is set to true, then BeginGenerateReports adapter will ignore
			report destination, which was specified on the report template, and set the destination
			to be Disk. This flag should be set to false if an SI decides to send reports to other
			then Disk destination (like email)
		-->
		<OverwriteReportTemplateDestination>true</OverwriteReportTemplateDestination>
		<!--
			If this flag is set to true, then BeginGenerateReports adapter will ignore
			report file format, which was specified on the report template, and set the format
			to be PDF. This flag should be set to false if an SI decides to generate reports in any other
			format
		-->
		<OverwriteReportTemplateFormat>true</OverwriteReportTemplateFormat>
		<!--
			If this flag is set to true, then BeginGenerateReports adapter will ignore
			report datasorice, which was specified on the report template, and set the destination
			data source, otherwise it will leave original data source intact and only specify user name and
			password
		-->
		<OverwriteReportOriginalDataSource>true</OverwriteReportOriginalDataSource>
		<InputQuery>
		   <![CDATA[
			SELECT inv.id_acc as AccountID, 
			'{sub_invoice_subreport;1.AccountID} = ' + CAST(inv.id_acc AS VARCHAR(10))  AS RecordSelectionFormula,
			CAST(id_interval AS VARCHAR(10)) + '/' + CAST(inv.id_acc AS VARCHAR(10)) + '/' + 'Invoice_Jpn.pdf' AS InstanceFileName,
			--parameters
			'0' AS Sample
			--inv.id_invoice AS invoiceid
			FROM t_invoice inv
			inner join t_billgroup_member bgm
			on inv.id_acc = bgm.id_acc
			inner join t_av_internal av
			on inv.id_acc = av.id_acc
			inner join t_billgroup bg
			on inv.id_interval = bg.id_usage_interval
			and bg.id_billgroup = %%ID_BILLGROUP%% 
			inner join t_enum_data ed
			on ed.id_enum_data = av.c_InvoiceMethod
			left outer join t_av_contact av_country
			on inv.id_acc = av_country.id_acc
			left outer join t_enum_data ed_country
			on ed_country.id_enum_data = av_country.c_country
			left outer join t_enum_data ed_contacttype
			on av_country.c_contacttype = ed_contacttype.id_enum_data
			WHERE ed.nm_enum_data <> 'metratech.com/accountcreation/InvoiceMethod/None'
			and ed_country.nm_enum_data = 'Global/CountryName/Japan'
			and ed_contacttype.nm_enum_data = 'metratech.com/accountcreation/contacttype/bill-to'
			and bgm.id_billgroup = %%ID_BILLGROUP%% 
	  	  ]]>
		</InputQuery>
		<SampleModeInputQuery>
		   <![CDATA[
			SELECT TOP 10 inv.id_acc as AccountID, 
			'{sub_invoice_subreport;1.AccountID} = ' + CAST(inv.id_acc AS VARCHAR(10))  AS RecordSelectionFormula,
			CAST(id_interval AS VARCHAR(10)) + '/' + CAST(inv.id_acc AS VARCHAR(10)) + '/' + 'Invoice_Jpn.pdf' AS InstanceFileName,
			--parameters
			'1' AS Sample
			--inv.id_invoice AS invoiceid
			FROM t_invoice inv
			inner join t_billgroup_member bgm
			on inv.id_acc = bgm.id_acc
			inner join t_billgroup bg
			on inv.id_interval = bg.id_usage_interval
			and bg.id_billgroup = %%ID_BILLGROUP%% 
			inner join t_av_internal av
			on inv.id_acc = av.id_acc
			inner join t_enum_data ed
			on ed.id_enum_data = av.c_InvoiceMethod
			left outer join t_av_contact av_country
			on inv.id_acc = av_country.id_acc
			left outer join t_enum_data ed_country
			on ed_country.id_enum_data = av_country.c_country
			left outer join t_enum_data ed_contacttype
			on av_country.c_contacttype = ed_contacttype.id_enum_data
			WHERE ed.nm_enum_data <> 'metratech.com/accountcreation/InvoiceMethod/None'
			and ed_country.nm_enum_data = 'Global/CountryName/Japan'
			and ed_contacttype.nm_enum_data = 'metratech.com/accountcreation/contacttype/bill-to'
			and bgm.id_billgroup = %%ID_BILLGROUP%% 
	  	  ]]>
		</SampleModeInputQuery>
	</Report>
	
</EndOfPeriodReports>
<!-- ScheduledReports section is empty out of the box -->
<ScheduledReports>
</ScheduledReports>
</xmlconfig>