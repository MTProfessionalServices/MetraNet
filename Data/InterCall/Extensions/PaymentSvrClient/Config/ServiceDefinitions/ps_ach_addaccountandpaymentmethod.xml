<?xml version="1.0" encoding="utf-8"?>
<PropertyBag xmlns:arrays="http://schemas.microsoft.com/2003/10/Serialization/Arrays" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" i:type="ServiceDefinitionEntity" xmlns="MetraTech">
  <Availability>Unknown</Availability>
  <DatabaseNameMapping i:nil="true" />
  <DefaultValue i:nil="true" />
  <Description>Payment Server stores 2 categories of information: account and payment method.
      Account information is data common to all payment methods, such as, account id,
      confirmation requested, retry on failure, etc. Payment method information
      includes credit card numbers and bank account numbers.

      Payment Server has 2 modes of operation: restrict payment methods on record to
      one per payment type and allow multiple payment methods on record for each
      payment type. For example, the former mode restricts a subscriber to store at
      most a single credit card payment method and a single ACH payment method. The
      latter allows for multiple credit car payment methods and multiple ACH payment
      methods for a subscriber. When running in the restricted mode, this service 
      removes the previous payment method prior to adding the new one. 

      This service includes data from both information categories. However, account
      information is added only when storing the first payment method. 
      The uniquely identifying data is the account id, routing number, last four digits 
      of the bank account number, and the account type.

      This service runs a prenote transaction. Payment Server can not process
      transactions against this payment method until a successful prenote repsonse
      has been obtained.

      Typical usage: Synchronous metering.

      Return properties:
      name                        type      length    comment  
      retcode                     int32               CREDITCARDACCOUNT_SUCCESS (0x618F0013L)
                                                      indicates success.
      respcode                    string    32        Processor specific text message. 
      paymentservicetransactionid string    32        Used for follow up transaction
                                                      inquiries. 
      _AccountID                  int32               A value of -1 indicates an error.

      Current Version: 1.3

      Changes:
      09/20/00 (V1.3)
      - Changed the name from ach_addaccount to ach_addaccountandpaymentmethod. 
      - Customer name is now included with the payment method. For example, a
        subscriber may have a different Name-On-Card for each credit card on
        record.
      - New properties are: authreceieved, retryonfailure, numberretries,
        confirmrequested, delay, and billearly.  
      - Removed primary and enabled from this service. The initial payment method 
        for a subscriber automatically becomes the primary. Enabled use to mean that
        the prenote response has not been received. Enabled is now a flag that
        indicates whether this payment method is active. This flag is set to true
        by default.</Description>
  <Direction>Input</Direction>
  <IsCore>false</IsCore>
  <Name>ps_ach_addaccountandpaymentmethod</Name>
  <Required>true</Required>
  <Type i:type="PropertyBagType">
    <BaseType>PropertyBag</BaseType>
    <ListType>None</ListType>
    <Name>ServiceDefinition</Name>
    <PropertyBagMode>ExtensibleEntity</PropertyBagMode>
  </Type>
  <Namespace>metratech.com.ServiceDefinitions</Namespace>
  <Properties>
    <CustomProperties>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>The account identifier is a numeric value that represents a subscriber.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>_AccountID</Name>
        <Required>true</Required>
        <Type i:type="NumberType">
          <BaseType>Integer32</BaseType>
          <ListType>None</ListType>
          <FixedUnitOfMeasure i:nil="true" />
          <UnitOfMeasureCategory i:nil="true" />
          <UnitOfMeasureMode>None</UnitOfMeasureMode>
          <UnitOfMeasureProperty i:nil="true" />
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>The billing address associated with the bank account.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>address</Name>
        <Required>false</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>255</Length>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Indicates whether an authorization form has been received.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>authreceived</Name>
        <Required>true</Required>
        <Type i:type="NumberType">
          <BaseType>Integer32</BaseType>
          <ListType>None</ListType>
          <FixedUnitOfMeasure i:nil="true" />
          <UnitOfMeasureCategory i:nil="true" />
          <UnitOfMeasureMode>None</UnitOfMeasureMode>
          <UnitOfMeasureProperty i:nil="true" />
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Subscriber bank account number. The trailing underscore is a naming convention 
        that indicates the Listener encrypts the field prior to queuing the session.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>bankaccountnum_</Name>
        <Required>true</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>32</Length>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Type of account. Possible values are checking or savings.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>bankaccounttype</Name>
        <Required>true</Required>
        <Type i:type="EnumerationType">
          <BaseType>Enumeration</BaseType>
          <ListType>None</ListType>
          <Category>metratech.com/paymentserver.bankaccounttype</Category>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Name of the subscriber's bank.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>bankname</Name>
        <Required>true</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>40</Length>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Indicates whether to move the payment scheduled date forward if the scheduled
        date falls on a weekend or holiday.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>billearly</Name>
        <Required>true</Required>
        <Type i:type="NumberType">
          <BaseType>Integer32</BaseType>
          <ListType>None</ListType>
          <FixedUnitOfMeasure i:nil="true" />
          <UnitOfMeasureCategory i:nil="true" />
          <UnitOfMeasureMode>None</UnitOfMeasureMode>
          <UnitOfMeasureProperty i:nil="true" />
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Associated with the address.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>city</Name>
        <Required>false</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>40</Length>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Indicates whether the subscriber wants to manually confirm payment transactions.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>confirmrequested</Name>
        <Required>true</Required>
        <Type i:type="NumberType">
          <BaseType>Integer32</BaseType>
          <ListType>None</ListType>
          <FixedUnitOfMeasure i:nil="true" />
          <UnitOfMeasureCategory i:nil="true" />
          <UnitOfMeasureMode>None</UnitOfMeasureMode>
          <UnitOfMeasureProperty i:nil="true" />
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Associated with the address.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>country</Name>
        <Required>false</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>25</Length>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Full subscriber name.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>customername</Name>
        <Required>true</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>40</Length>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>The number of days to wait to submit a payment from the billing statement date.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>delay</Name>
        <Required>true</Required>
        <Type i:type="NumberType">
          <BaseType>Integer32</BaseType>
          <ListType>None</ListType>
          <FixedUnitOfMeasure i:nil="true" />
          <UnitOfMeasureCategory i:nil="true" />
          <UnitOfMeasureMode>None</UnitOfMeasureMode>
          <UnitOfMeasureProperty i:nil="true" />
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Email address.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>email</Name>
        <Required>false</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>255</Length>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>The maximum number of times to retry a failed transaction.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>numberretries</Name>
        <Required>true</Required>
        <Type i:type="NumberType">
          <BaseType>Integer32</BaseType>
          <ListType>None</ListType>
          <FixedUnitOfMeasure i:nil="true" />
          <UnitOfMeasureCategory i:nil="true" />
          <UnitOfMeasureMode>None</UnitOfMeasureMode>
          <UnitOfMeasureProperty i:nil="true" />
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Reserved for future use.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>reserved1</Name>
        <Required>false</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>40</Length>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Reserved for future use.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>reserved2</Name>
        <Required>false</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>40</Length>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>The purpose of this field is to indicate whether to store credit card 
          or banking information long term. This provides the subscriber with the 
          option to specify whether the payment server retains this information for 
          future use or to provide this information for each use.

          Currently, this field is ignored.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>retaincardinfo</Name>
        <Required>true</Required>
        <Type i:type="NumberType">
          <BaseType>Integer32</BaseType>
          <ListType>None</ListType>
          <FixedUnitOfMeasure i:nil="true" />
          <UnitOfMeasureCategory i:nil="true" />
          <UnitOfMeasureMode>None</UnitOfMeasureMode>
          <UnitOfMeasureProperty i:nil="true" />
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Indicates whether to automatically retry failed transactions.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>retryonfailure</Name>
        <Required>true</Required>
        <Type i:type="NumberType">
          <BaseType>Integer32</BaseType>
          <ListType>None</ListType>
          <FixedUnitOfMeasure i:nil="true" />
          <UnitOfMeasureCategory i:nil="true" />
          <UnitOfMeasureMode>None</UnitOfMeasureMode>
          <UnitOfMeasureProperty i:nil="true" />
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>The Routing Number is a 9-digit number consisting of three components:  
        Federal Reserve Routing Symbol (4-digits), ABA Institution Identifier (4-digits),
        and a single Check Digit.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>routingnumber</Name>
        <Required>false</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>9</Length>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Associated with the address.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>state</Name>
        <Required>false</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>20</Length>
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Indicates a testing session through a PS pipeline.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>testsession</Name>
        <Required>true</Required>
        <Type i:type="NumberType">
          <BaseType>Integer32</BaseType>
          <ListType>None</ListType>
          <FixedUnitOfMeasure i:nil="true" />
          <UnitOfMeasureCategory i:nil="true" />
          <UnitOfMeasureMode>None</UnitOfMeasureMode>
          <UnitOfMeasureProperty i:nil="true" />
        </Type>
      </Property>
      <Property i:type="ServiceDefinitionProperty">
        <Availability>Unknown</Availability>
        <DatabaseNameMapping i:nil="true" />
        <DefaultValue i:nil="true" />
        <Description>Associated with the address.</Description>
        <Direction>Input</Direction>
        <IsCore>false</IsCore>
        <Name>zip</Name>
        <Required>false</Required>
        <Type i:type="StringType">
          <BaseType>String</BaseType>
          <ListType>None</ListType>
          <Length>10</Length>
        </Type>
      </Property>
    </CustomProperties>
  </Properties>
  <AutoDelete>false</AutoDelete>
  <AutoResubmit>false</AutoResubmit>
</PropertyBag>