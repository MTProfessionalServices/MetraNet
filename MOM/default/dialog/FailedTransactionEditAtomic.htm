<HTML>
 <HEAD>
  <TITLE><LABEL NAME="TEXT_FAILED_TRANSACTIONS_EDIT_FAILED_TRANSACTION">Edit Failed Transaction...</LABEL></TITLE>
  <LINK rel="STYLESHEET" type="text/css" href="/mom/default/localized/en-us/styles/styles.css">  
 </HEAD>

<BODY>

<FORM name="mdm">

<!-- Title Bar -->
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" Width="100%">
 <TR>
  <TD Class="CaptionBar" nowrap><LABEL NAME="TEXT_FAILED_TRANSACTIONS_EDIT_FAILED_TRANSACTION">Edit Failed Transaction</LABEL>&nbsp;&nbsp;&nbsp;&nbsp;
<button OnClick="mdm_RefreshDialog(this)" name="ok" Class="clsOkButton"><MDMLABEL Name="TEXT_SAVE"></MDMLABEL></button>
<button onclick="mdm_RefreshDialog(this)" name="cancel" Class="clsOkButton"><MDMLABEL Name="TEXT_CANCEL"></MDMLABEL></button>
<button class='clsButtonBlueXLarge' id='EditMapping' onclick="window.open('[AUDIT_LOG_LIST_DIALOG]?EntityType=5&EntityId=<LABEL Name="CaseNumber" Type="Value"></LABEL>&Title=<LABEL Name="TEXT_FAILED_TRANSACTIONS_AUDIT_HISTORY">Audit History For Failed Transaction Case Number</LABEL>%20<LABEL Name="CaseNumber" Type="Value"></LABEL>','', 'height=400,width=700, resizable=yes, scrollbars=yes, status=yes'); return false;"><MDMLABEL Name="TEXT_VIEW_AUDIT_TRAIL"></MDMLABEL></button>
  </TD>
 </TR>
</TABLE>

<TABLE  BORDER="0"  CELLPADDING="0" CELLSPACING="0">
<TR><td width="50%" valign="top">
<TABLE  BORDER="0"  CELLPADDING="0" CELLSPACING="0">
 <TR>
    <TD nowrap class="captionEW" style="font-weight:bold;"><LABEL NAME="TEXT_FAILED_TRANSACTIONS_CASE_NUMBER">Case Number</LABEL>:&nbsp;&nbsp;</TD>
    <TD class=""><LABEL Name="CaseNumber" Type="Value"></LABEL></TD>
 </TR>
 <TR>
    <TD class="captionEW" style="font-weight:bold;"><LABEL NAME="TEXT_FAILED_TRANSACTIONS_CASE_STATUS">Case Status</LABEL>:&nbsp;&nbsp;</TD>
    <TD class=""><LABEL Name="CaseStatusReasonCode" Type="Value"></LABEL></TD>
 </TR>
 <TR>
    <TD nowrap class="captionEW" style="font-weight:bold;"><LABEL NAME="TEXT_FAILED_TRANSACTIONS_ID">Failed Transaction Id</LABEL>:&nbsp;&nbsp;</TD>
    <TD class=""><LABEL Name="TEXT_FAILED_TRANSACTION_FAILURE_ID">ID</LABEL></TD>
 </TR>
 <TR>
    <TD nowrap class="captionEW" style="font-weight:bold;"><LABEL NAME="TEXT_FAILED_TRANSACTIONS_SERVICE_ERROR">Service With Error</LABEL>:&nbsp;&nbsp;</TD>
    <TD class=""><LABEL Name="ServiceName" Type="Value">Test Service</LABEL></TD>
 </TR>
 <TR>
    <TD nowrap class="captionEW" style="font-weight:bold;"><LABEL NAME="TEXT_FAILED_TRANSACTIONS_ERROR_MESSAGE">Error Message</LABEL>:&nbsp;&nbsp;</TD>
    <TD class=""><LABEL Name="ErrorMessage" Type="Value">Plugin failed</LABEL></TD>
 </TR> 

</TABLE>
</TD>

<TD>
<input type="hidden" name="CaseStatus">
<input type="hidden" name="CaseStatusReasonCode">
<input type="hidden" name="CaseStatusUpdated">
<table border="0" cellspacing="2" cellpadding="2" align="right">
 <TR>
    <TD width="32">&nbsp;</TD> 
    <td nowrap class="captionEWRequired" style="vertical-align: text-top;"><LABEL NAME="TEXT_FAILED_TRANSACTIONS_STATUS">Status</LABEL>:&nbsp;</td>
    <td>
          <table class="clsDialogEditTable" cellspacing="1" cellpadding="2" width="100%">
                      
                     <tr id="state0">
                        <td align="center" valign="top" class="TableCell">
                           <input type="radio" name="NewStatus" value="N" onClick="setStatusUpdated(this)">
                        </td>
                        <td align="left" class="TableCell" title="[TEXT_FAILED_TRANSACTIONS_OPEN_DESCRIPTION]">
                           <strong><LABEL NAME="TEXT_FAILED_TRANSACTIONS_OPEN">Open</LABEL></strong>
                        </td>
                     </tr>
                     <tr id="state1">
                        <td align="center" valign="top" class="TableCell">
                           <input type="radio" name="NewStatus" value="I" onClick="setStatusUpdated(this)">
                        </td>
                        <td align="left" class="TableCell" title="[TEXT_FAILED_TRANSACTIONS_INVESTIGATION_DESCRIPTION]">
                           <strong><LABEL NAME="TEXT_FAILED_TRANSACTIONS_INVESTIGATION">Under Investigation</LABEL></strong><BR>
                           <LABEL NAME="TEXT_FAILED_TRANSACTIONS_REASONE_CODE">Reason Code</LABEL>:
                                  <SELECT class="clsInputBox" name="InvestigationReasonCode" onClick="document.all.NewStatus[1].checked=true;" onChange="setStatusUpdated(null)"></SELECT>
                           
                        </td>
                     </tr>
                     <tr id="state2">
                        <td align="center" valign="top" class="TableCell">
                           <input type="radio" name="NewStatus" value="C" onClick="setStatusUpdated(this);">
                        </td>
                        <td align="left" class="TableCell" title="[TEXT_FAILED_TRANSACTIONS_PENDING_RESUBMIT_DESCRIPTION]">
                           <strong><LABEL NAME="TEXT_FAILED_TRANSACTIONS_PENDING_RESUBMIT">Corrected - Pending Resubmit</LABEL></strong>
                           <input type="checkbox" disabled name="ResubmitNow" onClick="setStatusUpdated(null);"><LABEL NAME="TEXT_FAILED_TRANSACTIONS_RESUBMIT_NOW">Resubmit Now</LABEL>
		                   </td>
                     </tr>
                     <tr id="state3">
                        <td align="center" valign="top" class="TableCell">
                           <input type="radio" name="NewStatus" value="P" onClick="setStatusUpdated(this)">
                        </td>
                        <td align="left" class="TableCell" title="[TEXT_FAILED_TRANSACTIONS_DISMISSED_DESCRIPTION]">
                           <strong><LABEL NAME="TEXT_FAILED_TRANSACTIONS_DISMISSED">Dismissed</LABEL></strong><BR>
                           <LABEL NAME="TEXT_FAILED_TRANSACTIONS_REASONE_CODE2">Reason Code</LABEL>:
                           <SELECT class="clsInputBox" name="DismissedReasonCode" onClick="document.all.NewStatus[3].checked=true;" onChange="setStatusUpdated(null)">
                           </SELECT>
                        </td>
                     </tr>                                     
        </TABLE>
    </TD>
 </TR>
 <TR>
    <TD width="32">&nbsp;</TD> 
    <td class="captionEWRequired" style="vertical-align: text-top;"><LABEL NAME="TEXT_FAILED_TRANSACTIONS_COMMENT">Comment</LABEL>:&nbsp;</td>
    <TD class="fieldRequired"><TEXTAREA class="clsInputBox" cols=55 rows=4 name="Comment"></TEXTAREA></TD>
 </TR>

</TABLE>

<SCRIPT LANGUAGE="JavaScript">
function setInitialStatusSelection()
{
  //Set the correct radio button for status
  buttonGroup=document.mdm.NewStatus;
  for ( var i=0; i < buttonGroup.length; i++ )
  {
    //alert(buttonGroup[i].value);
    if (buttonGroup[i].value==document.mdm.CaseStatus.value)
    {
      buttonGroup[i].checked = true;
      //Removed the clearing out of the onClick event for the current value because changing the status back to this value
      //did not correctly set/reset the ResubmitNow checkbox.
      //buttonGroup[i].onclick=""; 
      break;
    }
  }
  
  if (document.mdm.CaseStatus.value=="C")
  {
    document.all.ResubmitNow.disabled = false;
  }
  else
  {
    document.all.ResubmitNow.disabled = true;
    document.all.ResubmitNow.checked  = false;
  }
}

function setStatusUpdated(objClicked)
{
  //window.alert("setStatusUpdated");

  document.mdm.CaseStatusUpdated.value = "T"; 
    
  if(objClicked!=null)
  {
    //window.alert('Value is ' +  objClicked.value );
      if(objClicked.value=="C")
      {
          document.all.ResubmitNow.disabled = false;
      }
      else
      {
          document.all.ResubmitNow.disabled = true;
          document.all.ResubmitNow.checked  = false;
      }
  }
}

setInitialStatusSelection();
</SCRIPT>

</TD>
</TR>
</TABLE>
<!-- End Case Information -->

<BR>

<!-- Title Bar -->
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" Width="100%">
 <TR>
  <TD Class="CaptionBar" nowrap><LABEL NAME="TEXT_FAILED_TRANSACTIONS_EDIT_FAILED_TRANSACTION">Edit Failed Transaction...</LABEL>   
  <LABEL Name="TEXT_FAILED_TRANSACTION_FAILURE_ID">ID</LABEL><!-- The TEXT is programmatically added to the dictionary -->
  </TD>
 </TR>
</TABLE>
<BR>

<!-- Property Table -->
<BR>
<TABLE Width="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0">
<TR>
  <TD Class='TableHeader' NoWrap><LABEL NAME="TEXT_FAILED_TRANSACTIONS_EDIT_COLUMN_PROPERTY">Property</LABEL></TD>
  <TD Class='TableHeader' NoWrap><LABEL NAME="TEXT_FAILED_TRANSACTIONS_EDIT_COLUMN_TYPE">Type</LABEL></TD>
  <TD Class='TableHeader' NoWrap><LABEL NAME="TEXT_FAILED_TRANSACTIONS_EDIT_COLUMN_LENGTH">Length</LABEL></TD>
  <TD Class='TableHeader' NoWrap><LABEL NAME="TEXT_FAILED_TRANSACTIONS_EDIT_COLUMN_REQUIRED">Required</LABEL></TD>
  <TD Class='TableHeader' NoWrap><LABEL NAME="TEXT_FAILED_TRANSACTIONS_EDIT_COLUMN_STATUS1">Metered Status</LABEL></TD>
  <TD Class='TableHeader' NoWrap><LABEL NAME="TEXT_FAILED_TRANSACTIONS_EDIT_COLUMN_STATUS2">Meter Status</LABEL></TD>
  <TD Class='TableHeader' NoWrap><LABEL NAME="TEXT_FAILED_TRANSACTIONS_EDIT_COLUMN_VALUE">Value</LABEL></TD>
<TR>
[PROPERTIES] <!-- Do not touche this [] Tag - F.Torres-->
 
</TABLE>
<BR>
<INPUT Type="CheckBox" Name="mdmCheckRequiredField" CHECKED><LABEL NAME="TEXT_FAILED_TRANSACTIONS_EDIT_REQUIRED_FIELDS">Check For Required Fields</LABEL>
<BR>

</FORM>
</BODY>
</HTML>
