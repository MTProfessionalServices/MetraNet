<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title> Creating a Batch with an Expected Count </title>
<meta name="Generator" content="Author-it" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="Keywords" content="Creating a Batch with an Expected Count" />
<script type="text/javascript" src="dhtml_toc.js"></script>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="stylesheet.css" />
<base target="BODY" />
<style type="text/css">
a
{color:#555555; text-decoration:none;border-bottom:1px dotted;
}
a:hover
{color:#0000FF; text-decoration:none;border-bottom:1px solid;
}
<!--
.footer {
	font-family: Arial, Helvetica, sans-serif;
	font-size: 10px;
}
-->
</style>
</head>

<div id = "div1"></div>

<script type="text/javascript">
function showMessage() {
var emsubj = encodeURI(document.title);
var embody = encodeURI(window.location.href);
var text = "<a href=\"mailto:techdoc@metratech.com?subject=" + emsubj + "&amp;body=" + embody + "\"><img src='mail.png' alt='Mail link' border='0'></a>"
document.getElementById("div1").innerHTML = text;
}
</script>

<body background="#ffffff" onload="loadParent();showMessage();if (isTOCLoaded()) {expand('25228');expand('22306');expand('22305');expand('20847');expand('19610');expand('13614');highlight('25230')}">

<table border="0" width="90%">
  <tr valign="top"><td>
    <table class="relatedtopics aboveheading" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width= "18">
<p class="bodytext"><a href="Usage.Statistics.Filter.hlp.htm" target="_self"><img src="nexticon.gif" alt="Next Topic" height="17" width="18" vspace="0" hspace="0" align="bottom" border="0" /></a></p></td>
<td width= "18">
<p class="bodytext"><a href="25229.htm" target="_self"><img src="previousicon.gif" alt="Previous Topic" height="17" width="18" vspace="0" hspace="0" align="bottom" border="0" /></a></p></td>
<td width= "48">
<p class="bodytext"><a href="indexpage.htm" target="TOC"><img src="indexicon.gif" alt="Book Index" height="1" width="1" vspace="2" hspace="2" align="bottom" border="0" /></a></p></td>
</tr>
</table>
<p class="heading6">Creating a Batch with an Expected Count</p>
<p class="bodytext">Here is an example of a script that does create a batch with an &quot;expected&quot; count. </p>
<p class="code">readTravel: import[</p>
<p class="code">  filename=$inputFile,</p>
<p class="code"> <strong class="strong"> header=true,</strong></p>
<p class="code"><strong class="strong">  collectionIDEncoded=$batchID</strong>,</p>
<p class="code">    format=&quot;myRec (</p>
<p class="code">      c_account       text_delimited_nvarchar(delimiter=','),</p>
<p class="code">      c_duration       text_delimited_base10_decimal(delimiter=','),</p>
<p class="code">      c_language       text_delimited_enum(enum_space='travelspot.com/TravSpotEnums', enum_type='Languages', delimiter=','),</p>
<p class="code">      c_ConferenceID   text_delimited_base10_int32(delimiter=','),</p>
<p class="code">      c_ConferenceName text_delimited_nvarchar(delimiter=crlf))&quot;,</p>
<p class="code">    mode=&quot;sequential&quot;];</p>
<p class="code"></p>
<p class="code">meterTravel: meter[service=&quot;travelspot.com/TranslationService&quot;,</p>
<p class="code">                   <strong class="strong">collectionIDEncoded=$batchID]</strong>;</p>
<p class="bodytext">In the script, the import operator specifies <strong class="strong">header=true</strong>.  This means the input file must have an opening line telling the number of records in the file. For example:</p>
<p class="code">3</p>
<p class="code">cook,20,French,1001,Team Meeting</p>
<p class="code">jcook,44,German,1002,Sales Conference</p>
<p class="code">jcook,105,German,1003,Europe Team Teleconference</p>
<p class="bodytext">The import operator also specifies a <strong class="strong">collectionIDEncoded</strong>. If you specify an import operator with both header and collectionIDEncoded, the MetraFlow script creates a batch record with the &quot;expected&quot; number of records set. For example, regardless of whether the pipeline was up or down, if you ran the above script and then used MetraControl/Batch Management, you would see a batch record with the &quot;expected&quot; number of records set to 3.</p>
<p class="bodytext"></p>


  </td></tr></table>
<table width="100%" style = "border-top:1px solid #010101; margin-top: 24px; padding-top: 6px;"><tr valign="bottom"><td>
    <span class="footer">MetraTech Proprietary and Confidential - MetraNet 7.0.1</span></td>
</tr></table>
</body>
</html>
