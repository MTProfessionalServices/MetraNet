<xmlconfig>
  <mtsysconfigdata>
    <effective_date ptype="DATETIME">1998-11-19T00:00:00Z</effective_date>
    <timeout ptype="INTEGER">30</timeout>
    <configfiletype>CONFIG_DATA</configfiletype>
  </mtsysconfigdata>

  <mtconfigdata>

 <version ptype="INTEGER">1</version>
 <!-- First processor configuration -->
 <processor>
  <name>CalcActualDuration</name>
  <progid>MetraPipeline.MTSQLInterpreter.1</progid>
  <description>Calculates Conference Actual Duration</description>

	<!--
  <autotest>
    <file>actualduration.xml</file>
  </autotest>
  -->

  <inputs>
    
  </inputs>

  <outputs>
    
  </outputs>
  
  <!-- Processor specific configuration data -->
  <configdata>
 
  <Program><![CDATA[
		
			CREATE PROCEDURE calcactualduration 
				@RawActualDuration	INTEGER 
				@ActualDuration	DECIMAL OUTPUT
			AS
				DECLARE @nonFractionalDuration INTEGER;
				DECLARE @fraction DECIMAL;
				SET @nonFractionalDuration = @RawActualDuration / 60;
				SET @ActualDuration = CAST(@RawActualDuration AS DECIMAL) / 60.0;
				SET @fraction = @ActualDuration - CAST(@nonFractionalDuration AS DECIMAL);
				SET @ActualDuration = 
				CASE WHEN (@fraction > 0.0)
						THEN CAST(@nonFractionalDuration AS DECIMAL) + (@fraction * 0.6)
	      ELSE
	          @ActualDuration
				END;
				/*Round it to 2 digits*/
				SET @ActualDuration = round(@ActualDuration, 2);
	 
  ]]></Program> 
    
  </configdata>

 </processor>

  </mtconfigdata>

</xmlconfig>

