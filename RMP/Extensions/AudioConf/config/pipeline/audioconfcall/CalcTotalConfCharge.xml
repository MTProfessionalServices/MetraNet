<xmlconfig>
  <mtsysconfigdata>
    <effective_date ptype="DATETIME">1998-11-19T00:00:00Z</effective_date>
    <timeout ptype="INTEGER">30</timeout>
    <configfiletype>CONFIG_DATA</configfiletype>
  </mtsysconfigdata>

  <mtconfigdata>

 <version ptype="INTEGER">1</version>
 <!-- First processor configuration -->
 <processor>
  <name>CalcTotalConfCharge</name>
  <progid>MetraPipeline.MTSQLInterpreter.1</progid>
  <description>Calculates Total Conferencing Charges</description>

	<!--
  <autotest>
    <file>cancelcharges.xml</file>
  </autotest>
  -->

  <inputs>
    
  </inputs>

  <outputs>
    
  </outputs>
  
  <!-- Processor specific configuration data -->
  <configdata>
 
  <Program><![CDATA[
		
			CREATE PROCEDURE calctotalcharges 	@ConnectionTotalAmount 					DECIMAL
																					@CancelCharges 									DECIMAL
																					@ReservationCharges 						DECIMAL
																					@UnusedPortCharges 							DECIMAL
																					@OverusedPortCharges						DECIMAL
																					@ConfChargeMinimum							DECIMAL
																					@TotalCallCharges 							DECIMAL OUTPUT
																					@AdjustmentAmount							 DECIMAL OUTPUT
																					@_Amount												DECIMAL OUTPUT
			AS
			SET @TotalCallCharges = 0.0;
			SET @_Amount = @ConnectionTotalAmount + @CancelCharges + @UnusedPortCharges + @OverusedPortCharges + @ReservationCharges;
			SET @AdjustmentAmount =0.0;
			IF (@_Amount < @ConfChargeMinimum)
				BEGIN
					SET @AdjustmentAmount = @ConfChargeMinimum - @_Amount;
					SET @_Amount = @ConfChargeMinimum;
				END;
			SET @TotalCallCharges = @_Amount - @ConnectionTotalAmount;
	 
  ]]></Program> 
    
  </configdata>

 </processor>

  </mtconfigdata>

</xmlconfig>
