<xmlconfig>
  <mtsysconfigdata>
    <effective_date ptype="DATETIME">1998-11-19T00:00:00Z</effective_date>
    <timeout ptype="INTEGER">30</timeout>
    <configfiletype>CONFIG_DATA</configfiletype>
  </mtsysconfigdata>

  <mtconfigdata>


 <version ptype="INTEGER">1</version>
 <!-- First processor configuration -->
 <processor>
  <name>Summation</name>
  <progid>MetraPipeline.SummationProc.1</progid>
  <description>Summarizes fields from the children into the parent record.</description>

  <!--
  <autotest>
    <file>summarizetest.xml</file>
  </autotest>
  -->

  <inputs>
  </inputs>

  <outputs>
    <output type="LONG">ActualNumConnections</output>
    <output type="LONG">UserNumConnections</output>
    <output type="DECIMAL">ConnectionTotalAmount</output>
    <output type="DATETIME">ActualStartTime</output>
    <output type="DATETIME">ConferenceEndTime</output>
    <output type="DECIMAL">ConferenceTotal</output>
  </outputs>

  <!-- Processor specific configuration data -->
  <configdata>
        <!-- Actual # of children, as summarized. -->
	<counter_prop_name>ActualNumChildren</counter_prop_name>

        <!-- Actual confernce connections (Counts Audioconfconnection children). -->
	<summation_item>
		<input_prop_name>ConferenceConnection</input_prop_name>
		<input_prop_type>INTEGER</input_prop_type> <!-- options: INTEGER, DOUBLE, DECIMAL, DATETIME, and TIME -->
		<input_service_id ptype="ID">metratech.com/audioconfconnection</input_service_id>
		<output_prop_name>ActualNumConnections</output_prop_name>
		<action>SUM</action> <!-- possible options: SUM, AVE, MIN, MAX -->
	</summation_item>

        <!-- Total user connections (excludes CSR, operator, and Translator). -->
	<summation_item>
		<input_prop_name>IncludedRole</input_prop_name>
		<input_prop_type>INTEGER</input_prop_type> <!-- options: INTEGER, DOUBLE, DECIMAL, DATETIME, and TIME -->
		<input_service_id ptype="ID">metratech.com/audioconfconnection</input_service_id>
		<output_prop_name>UserNumConnections</output_prop_name>
		<action>SUM</action> <!-- possible options: SUM, AVE, MIN, MAX -->
	</summation_item>

	<summation_item>
		<input_prop_name>_Amount</input_prop_name>
		<input_prop_type>DECIMAL</input_prop_type> <!-- options: INTEGER, DOUBLE, DECIMAL, DATETIME, and TIME -->
		<output_prop_name>ConnectionTotalAmount</output_prop_name>
		<action>SUM</action> <!-- possible options: SUM, AVE, MIN, MAX -->
	</summation_item>

	<!-- Actual conference start time. Minimum of children's ConnectTime.  -->
	<summation_item>
		<input_prop_name>ConnectTime</input_prop_name>
		<input_prop_type>DATETIME</input_prop_type> <!-- options: INTEGER, DOUBLE, DECIMAL, DATETIME, and TIME -->
		<input_service_id ptype="ID">metratech.com/audioconfconnection</input_service_id>
		<output_prop_name>ActualStartTime</output_prop_name>
		<action>MIN</action> <!-- possible options: SUM, AVE, MIN, MAX -->
    <default>ScheduledStartTime</default>
	</summation_item>

	<!-- Conference end time. Maximum of children's DisconnectTime. -->
	<summation_item>
		<input_prop_name>DisconnectTime</input_prop_name>
		<input_prop_type>DATETIME</input_prop_type> <!-- options: INTEGER, DOUBLE, DECIMAL, DATETIME, and TIME -->
		<input_service_id ptype="ID">metratech.com/audioconfconnection</input_service_id>
		<output_prop_name>ConferenceEndTime</output_prop_name>
		<action>MAX</action> <!-- possible options: SUM, AVE, MIN, MAX -->
    <default>ScheduledStartTime</default>
	</summation_item>

	<!-- Sum of total connections minutes.  Sum of children's ConnectionMinutes. -->
	<summation_item>
		<input_prop_name>ConnectionMinutes</input_prop_name>
		<input_prop_type>DECIMAL</input_prop_type> <!-- options: INTEGER, DOUBLE, DECIMAL, DATETIME, and TIME -->
		<input_service_id ptype="ID">metratech.com/audioconfconnection</input_service_id>
		<output_prop_name>ConferenceTotal</output_prop_name>
		<action>SUM</action> <!-- possible options: SUM, AVE, MIN, MAX -->
	</summation_item>


  </configdata>

 </processor>

 </mtconfigdata>

</xmlconfig>
