<?xml version="1.0" encoding="UTF-8"?>

<priceable_item>
  <name>Flat Rate Recurring Charge</name>
  <description>Recurring charge with a flat rate</description>
  <item_type>recurring</item_type>
  <relationships>
    <parent></parent>
  </relationships>
  <parameter_table>metratech.com/flatrecurringcharge</parameter_table>
  <counters></counters>
  <pipeline>
    <service_definition>metratech.com/flatrecurringcharge</service_definition>
    <product_view>metratech.com/flatrecurringcharge</product_view>
  </pipeline>
   <adjustment_type>
    <name>FlatRecurringChargeFlatAdjustment</name>
    <description>Recurring Charge Flat Adjustment</description>
    <displayname>Recurring Charge Flat Adjustment</displayname>
    <CalculationEngine>1</CalculationEngine>
    <supportsBulk>Y</supportsBulk>
    <formula>
	    <![CDATA[
        Create Procedure DoAdjustmentCalc 
	        -- inputs
	        @RCAdjustmentAmount DECIMAL,
	        -- outputs
	        @TotalAdjustmentAmount DECIMAL OUTPUT
	        as
         set @TotalAdjustmentAmount = @RCAdjustmentAmount
	    ]]>
    </formula>
    <applicabilityrules>
    </applicabilityrules>
    <Kind>3</Kind>
    <required_inputs>
      <input_val
        name="RCAdjustmentAmount"
        type="DECIMAL"
        displayname="Amount to adjust recurring charge"
      />
    </required_inputs>
    <outputs>
      <output_val
        name="TotalAdjustmentAmount"
        type="DECIMAL"
        displayname="Total Adjustment Amount"
      />
    </outputs>
    
   </adjustment_type>
    <adjustment_type>
    <name>FlatRecurringChargePercentAdjustment</name>
    <description>Recurring Charge Percent Adjustment</description>
    <displayname>Recurring Charge Percent Adjustment</displayname>
    <CalculationEngine>1</CalculationEngine>
    <supportsBulk>Y</supportsBulk>
    <formula>
	    <![CDATA[
        Create Procedure DoAdjustmentCalc 
	        -- inputs
	        @RCAdjustmentPercent DECIMAL,
	        @_Amount DECIMAL,
	        -- outputs
	        @TotalAdjustmentAmount DECIMAL OUTPUT
	        as
	        set @TotalAdjustmentAmount = round(@_Amount*@RCAdjustmentPercent*0.01, 2)
	    ]]>
    </formula>
    <applicabilityrules>
    </applicabilityrules>
    <Kind>3</Kind>
    <required_inputs>
      <input_val
        name="RCAdjustmentPercent"
        type="DECIMAL"
        displayname="Percent of the Amount to adjust recurring charge"
      />
      <input_val
        name="_Amount"
        type="DECIMAL"
        displayname="Amount of recurring charge"
      />
    </required_inputs>
    <outputs>
        <output_val
        name="TotalAdjustmentAmount"
        type="DECIMAL"
        displayname="Recurring Charge Total Adjustment Amount"
      />
    </outputs>
    
   </adjustment_type>     
</priceable_item>