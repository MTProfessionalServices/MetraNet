<!-- Developers: when checking in an update of this file please also update stageWithAR.xml -->

<xmlconfig>
  <version ptype="INTEGER">1</version>

  <stage>
    <name>GSMAccountCreation</name>
    <startstage ptype="BOOLEAN">YES</startstage>
    <finalstage ptype="BOOLEAN">YES</finalstage>
    
    <dependencies>

      <dependson>BatchUpdate</dependson>
      <dependson>Subscriptions</dependson>
      <dependson>UpdateAccountSubscriptions</dependson>

      <dependency>
        <processor>BatchUpdate</processor>
        <dependson>Audit</dependson>
      </dependency>

      <dependency>
        <processor>Audit</processor>
        <dependson>SetSubscriberID</dependson>
        <dependson>SetAuditProperties</dependson>
      </dependency>

      <dependency>
        <processor>SetAuditProperties</processor>
        <dependson>PopulateExtensionsGSM</dependson>
      </dependency>

      <dependency>
        <processor>Subscriptions</processor>
        <dependson>PopulateExtensionsGSM</dependson>
      </dependency>

      <dependency>
        <processor>UpdateAccountSubscriptions</processor>
        <dependson>Unsubscribe</dependson>
      </dependency>

      <dependency>
        <processor>Unsubscribe</processor>
        <dependson>PopulateExtensionsGSM</dependson>
      </dependency>

      <dependency>
        <processor>PopulateExtensionsGSM</processor>
        <dependson>AccountResolution</dependson>
        <dependson>ApplyTemplateProperties</dependson>
      </dependency>


      <dependency>
        <processor>AccountResolution</processor>
        <dependson>UpdateAccount</dependson>
        <dependson>AccountTableCreation</dependson>
      </dependency>

      <dependency>
        <processor>UpdateAccount</processor>
        <dependson>PriceListValidate</dependson>
        <dependson>ApplyTemplateProperties</dependson>
      </dependency>
      
      <dependency>
       <processor>ApplyRoleMembership</processor>
       <dependson>AccountTableCreation</dependson>
      </dependency>

      <dependency>
       <processor>AccountTableCreation</processor>
       <dependson>AccountTypeLookup</dependson>
      </dependency>

     <dependency>
       <processor>UpdateAccount</processor>
       <dependson>AccountTypeLookup</dependson>
     </dependency>

      <dependency>
        <processor>AccountTableCreation</processor>
        <dependson>PriceListValidate</dependson>
        <dependson>ApplyTemplateProperties</dependson>
      </dependency>

      <dependency>
	 <processor>ApplyTemplateProperties</processor>
	 <dependson>AccountTypeLookup</dependson>
      </dependency>

      <dependency>
        <processor>PriceListValidate</processor>
        <dependson>PriceListLookup</dependson>
        <dependson>AccountTypeLookup</dependson>
       <dependson>SetDefaults</dependson>
      </dependency>

    </dependencies>
  </stage>
</xmlconfig>

