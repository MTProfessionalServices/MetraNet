<xmlconfig>
  <version ptype="INTEGER">2</version>

  <ScheduledAdapters>
  </ScheduledAdapters>

  <EndOfPeriodAdapters>

    <Adapter>
      <Name>GenerateReportingDatamarts</Name>
      <DisplayName>Generate and/or Populate Reporting Data Marts</DisplayName>
      <ClassID>MetraTech.Reports.Adapters.GenerateReportingDatamartsAdapter,MetraTech.Reports.Adapters</ClassID>
      <ConfigFile>GenerateReportingDatamarts.xml</ConfigFile>
      <Description>
      <![CDATA[
        Standard MetraTech Adapter is used to populate reporting data marts
        from product views
      ]]>
      </Description>
      <RecurrencePattern>
        <UsageCycleType>All</UsageCycleType>
      </RecurrencePattern>
      <Dependencies>
        <DependsOn>Invoices</DependsOn>
      </Dependencies>
    </Adapter>

    <Adapter>
      <Name>BeginGenerateSampleInvoices</Name>
      <DisplayName>Triggers Sample Invoices Generation</DisplayName>
      <ClassID>MetraTech.Reports.Adapters.BeginGenerateReports,MetraTech.Reports.Adapters</ClassID>
      <ConfigFile>SampleReports.xml</ConfigFile>
      <Description>
       <![CDATA[
        MetraTech standard adapter, which triggers generation of sample invoices, so that
        invoice correctness could be validated before real production invoices are run
        ]]>
      </Description>
      <RecurrencePattern>
         <UsageCycleType>All</UsageCycleType>
      </RecurrencePattern>
        <Dependencies>
        <DependsOn>GenerateReportingDatamarts</DependsOn>
      </Dependencies>
    </Adapter>
    
    <Adapter>
      <Name>CompleteGenerateSampleInvoices</Name>
      <DisplayName>Wait for all sample invoices to finish</DisplayName>
      <ClassID>MetraTech.Reports.Adapters.CompleteGenerateReports,MetraTech.Reports.Adapters</ClassID>
      <ConfigFile>SampleReports.xml</ConfigFile>
      <Description>
      <![CDATA[
        MetraTech standard adapter, which waits for reporting provider (Crystal APS in our case)
        to finish running invoices
        ]]>
      </Description>
      <RecurrencePattern>
         <UsageCycleType>All</UsageCycleType>
      </RecurrencePattern>
        <Dependencies>
        <DependsOn>BeginGenerateSampleInvoices</DependsOn>
      </Dependencies>
    </Adapter>
    
    <Checkpoint>
      <Name>SampleInvoiceGenerationCheckpoint</Name>
      <DisplayName>Sample Invoice Generation Checkpoint</DisplayName>
      <Description>
      <![CDATA[
        This checkpoint needs to be acknowledged after Sample Invoices are examined
        for correctness.
        ]]>
      </Description>
      <RecurrencePattern>
         <UsageCycleType>All</UsageCycleType>
      </RecurrencePattern>
      <Dependencies>
        <DependsOn>CompleteGenerateSampleInvoices</DependsOn>
      </Dependencies>
    </Checkpoint>
    
    <Adapter>
      <Name>BeginGenerateProductionInvoices</Name>
      <DisplayName>Triggers Production Invoice Generation</DisplayName>
      <ClassID>MetraTech.Reports.Adapters.BeginGenerateReports,MetraTech.Reports.Adapters</ClassID>
      <ConfigFile>ProductionReports.xml</ConfigFile>
      <Description>
      <![CDATA[
        MetraTech standard adapter, which triggers generation of production invoices
        ]]>
      </Description>
      <RecurrencePattern>
         <UsageCycleType>All</UsageCycleType>
      </RecurrencePattern>
        <Dependencies>
        <DependsOn>SampleInvoiceGenerationCheckpoint</DependsOn>
      </Dependencies>
    </Adapter>
    
    <Adapter>
      <Name>CompleteGenerateProductionInvoices</Name>
      <DisplayName>Wait for all production invoices to finish</DisplayName>
      <ClassID>MetraTech.Reports.Adapters.CompleteGenerateReports,MetraTech.Reports.Adapters</ClassID>
      <ConfigFile>ProductionReports.xml</ConfigFile>
      <Description>
      <![CDATA[
        MetraTech standard adapter, which waits for reporting provider (Crystal APS in our case)
        to finish running invoices.
        ]]>
      </Description>
      <RecurrencePattern>
         <UsageCycleType>All</UsageCycleType>
      </RecurrencePattern>
        <Dependencies>
        <DependsOn>BeginGenerateProductionInvoices</DependsOn>
      </Dependencies>
    </Adapter>
  
  </EndOfPeriodAdapters>

</xmlconfig>
