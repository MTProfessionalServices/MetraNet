<xmlconfig>
	<version ptype="INTEGER">1</version>
	<name>PAYEE_SESSION</name>
	<Description>MetraView Interactive Report Configuration File</Description>

	<!-- Materialized View Interface implementation id -->
	<progid>MetraTech.DataAccess.MaterializedViews.QueryProvider</progid>

	<!-- DEFERRED, TRANSACTIONAL, OFF -->
	<UpdateMode>DEFERRED</UpdateMode>

	<!-- Relative path to the queries file -->
	<QueryPath>Queries\MaterializedViews\MetraView</QueryPath>

	<!-- Query used to create the materialized view -->
	<create_query_tag>__Create_PAYEE_SESSION__</create_query_tag>

	<!-- Query used to create the summary table for materialized view queries-->
	<init_query_tag>__INIT_PAYEE_SESSION__</init_query_tag>

	<full_query_tag>__FULL_PAYEE_SESSION__</full_query_tag>

	<Event>
		<Description>Update MV when usage table changes</Description>

		<!-- A set of base tables that the queries depend on -->
		<base_tables>
			<table_name>t_acc_usage</table_name>
		</base_tables>

		<!-- Set of queries executed for insert operation on t_acc_usage -->
		<Operation Name ="insert">
			<update_query_tag>__OpInsert_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>

		<!-- Set of queries to execute for delete operation on t_acc_usage-->
		<Operation Name ="delete">
				<update_query_tag>__OpDelete_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>
	</Event>
	
	<Event>
		<Description>Update MV when adjustment table changes</Description>

		<!-- A set of base tables that the queries depend on -->
		<base_tables>
			<table_name>t_adjustment_transaction</table_name>
		</base_tables>

		<!-- Set of queries executed for insert operation on t_adjustment_transaction -->
		<Operation Name ="insert">
			<update_query_tag>__OpInsert_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>

		<!-- Set of queries to execute for delete operation on t_adjustment_transaction-->
		<Operation Name ="delete">
			<update_query_tag>__OpDelete_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>

	</Event>

	<Event>
		<Description>Update MV when both adjustment and Usage table changes</Description>
		<!-- A set of base tables that the queries depend on -->
		<base_tables>
			<table_name>t_acc_usage</table_name>
			<table_name>t_adjustment_transaction</table_name>
		</base_tables>

		<!-- Set of queries executed for insert operation -->
		<Operation Name ="insert">
			<update_query_tag>__OpInsert_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>

		<!-- Set of queries to execute for delete operation-->
		<Operation Name ="delete">
			<update_query_tag>__OpDelete_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>
	</Event>
	<Event>
		<Description>Update MV when t_dm_account table changes</Description>

		<!-- A set of base tables that the queries depend on -->
		<base_tables>
			<table_name>t_dm_account</table_name>
		</base_tables>

		<!-- Set of queries executed for insert operation on t_adjustment_transaction -->
		<Operation Name ="insert">
			<update_query_tag>__OpInsert_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>

		<!-- Set of queries to execute for delete operation on t_adjustment_transaction-->
		<Operation Name ="update">
			<update_query_tag>__OpUpdate_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>
	</Event>

	<Event>
		<Description>Update MV when both account and Usage table changes</Description>
		<!-- A set of base tables that the queries depend on -->
		<base_tables>
			<table_name>t_acc_usage</table_name>
			<table_name>t_dm_account</table_name>
		</base_tables>

		<!-- Set of queries executed for insert operation -->
		<Operation Name ="insert">
			<update_query_tag>__OpInsert_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>

		<!-- Set of queries to execute for delete operation-->
		<Operation Name ="delete">
			<update_query_tag>__OpDelete_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>

		<Operation Name ="update">
			<update_query_tag>__OpUpdate_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>		
	</Event>

	<Event>
		<Description>Update MV when account,adjustment and Usage table changes</Description>
		<!-- A set of base tables that the queries depend on -->
		<base_tables>
			<table_name>t_acc_usage</table_name>
			<table_name>t_adjustment_transaction</table_name>
			<table_name>t_dm_account</table_name>
		</base_tables>
		<!-- Set of queries executed for insert operation -->
		<Operation Name ="insert">
			<update_query_tag>__OpInsert_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>

		<!-- Set of queries to execute for delete operation-->
		<Operation Name ="delete">
			<update_query_tag>__OpDelete_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>

		<Operation Name ="update">
			<update_query_tag>__OpUpdate_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>
	</Event>

	<Event>
		<Description>Update MV when account and adjustment table changes</Description>
		<!-- A set of base tables that the queries depend on -->
		<base_tables>
			<table_name>t_adjustment_transaction</table_name>
			<table_name>t_dm_account</table_name>
		</base_tables>

		<!-- Set of queries executed for insert operation -->
		<Operation Name ="insert">
			<update_query_tag>__OpInsert_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>

		<!-- Set of queries to execute for delete operation-->
		<Operation Name ="delete">
			<update_query_tag>__OpDelete_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>

		<Operation Name ="update">
			<update_query_tag>__OpUpdate_Update_PAYEE_SESSION__</update_query_tag>
		</Operation>
	</Event>
	
</xmlconfig>
