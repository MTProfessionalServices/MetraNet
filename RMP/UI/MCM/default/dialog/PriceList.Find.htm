<HTML>
<HEAD>
<LINK localized="TRUE" rel="STYLESHEET" type="text/css" href="/mcm/default/localized/en-us/styles/styles.css">
<TITLE><MDMLABEL name="TEXT_KEYTERM_PRODUCT_OFFERING"></MDMLABEL></TITLE>
<SCRIPT language="JavaScript" src="/mpte/shared/browsercheck.js"></SCRIPT>
<SCRIPT language="JavaScript" src="/mdm/internal/mdm.JavaScript.lib.js"></SCRIPT>
<SCRIPT>
function handleEnter()
{
  if (window.event.keyCode==13)
  {
      DoFind();
      return false;
  }
  if (window.event.keyCode==27)
  {
      return false;
  }
  return true;
}

function onParamTableSelected(idPT, idPI, item)
{
    document.mdm.FIND_PARAMTABLE_ID.value = idPT;
}
      
function DoFind()
{
  var sFindName,sFindDescription,sFindCurrency,sFindParamTableId
  try
  {
  if (bExpanded)
    sFindName=document.mdm.FIND_NAME[1].value
  else
    sFindName=document.mdm.FIND_NAME[0].value
  }
  catch(e){}
  
  sFindDescription = document.mdm.FIND_DESCRIPTION.value
  sFindCurrency = document.mdm.FIND_CURRENCY.value
  sFindParamTableId = document.mdm.FIND_PARAMTABLE_ID.value

  if (!mdm_VerifySearchWildcards(sFindName))
  {
    alert("[TEXT_FILTER_WILDCARD_CONSTRAINT_MESSAGE]");
    return;
  }
  
  if (!mdm_VerifySearchWildcards(sFindDescription))
  {
    alert("[TEXT_FILTER_WILDCARD_CONSTRAINT_MESSAGE]");
    return;
  }

  parent.frames["PricelistMain"].location = "Rates.AllPricelists.List.asp?Title=TEXT_RATES_ALLPRICELISTS_LIST&Rates=TRUE&NextPage=/mcm/default/dialog/Pricelist.ViewEdit.Frame.asp&LinkColumnMode=TRUE&FIND_NAME=" + mdm_URLencode(sFindName) + "&FIND_DESCRIPTION=" + mdm_URLencode(sFindDescription) + "&FIND_CURRENCY=" + mdm_URLencode(sFindCurrency) + "&FIND_PARAMTABLE_ID=" + mdm_URLencode(sFindParamTableId)
}


var bExpanded = !<MDMLABEL Name="InitiallyExpanded"></MDMLABEL>;

      function ExpandFind()
      {
        if (bExpanded)
        {
          bExpanded = false;
          if ((parent.document.all("PriceListView")) && (parent.document.all("PriceListView").all("PriceListNav")))
            parent.document.all("PriceListView").all("PriceListNav").rows = '60,*';
          hideDIV("FindContracted",false)
          hideDIV("FindExpanded",true)
          
          document.imgExpandContract.src='/Res/Ext/resources/images/default/layout/ns-expand.gif'
          document.imgExpandContract.alt='Show More Options';
                    
          try
          {
            document.mdm.FIND_NAME[0].focus();
          }
          catch(e)
          {
          }
        }
        else
        {
          bExpanded = true;
          hideDIV("FindContracted",true)
          hideDIV("FindExpanded",false)
          if ((parent.document.all("PriceListView")) && (parent.document.all("PriceListView").all("PriceListNav")))
            parent.document.all("PriceListView").all("PriceListNav").rows = '200,*';
          
          document.imgExpandContract.src='/Res/Ext/resources/images/default/layout/ns-collapse.gif'
          document.imgExpandContract.alt='Show Fewer Options';
          
          try
          {
            document.mdm.FIND_NAME[1].focus();
          }
          catch(e)
          {
          }
        }
      } 

var bParamExpanded = false;

      function ExpandParamList()
      {
        if (bParamExpanded)
        {
          bParamExpanded = false;
          hideDIV("ParamTableSelectPanel",true)
          document.imgExpandParamTableList.src='/mdm/internal/images/toolbar/arrowblueright.gif'
          document.imgExpandParamTableList.alt='Show list of parameter tables to search on';
        }
        else
        {
          bParamExpanded = true;
          hideDIV("ParamTableSelectPanel",false)
          document.imgExpandParamTableList.src='/mdm/internal/images/toolbar/arrowbluedown.gif'
          document.imgExpandParamTableList.alt='Hide list of parameter tables to search on';
        }
      } 
      
      
      function hideDIV(sDivName,bDisable)
      {
        if (bDisable)
          document.getElementById(sDivName).style.display = 'none';
        else
          document.getElementById(sDivName).style.display = '';
      }
</SCRIPT>
</HEAD>
<BODY class="side" onKeyPress="handleEnter();">
	<FORM name='mdm'>
		<DIV class="clsFindTab">	<!-- start find dialog -->
			<TABLE class="TabContainer" border="0" cellpadding="1" cellspacing="0" width="100%">
				<TR>
					<TD class="NavigationPaneHeader" colspan="1">	&nbsp;Price List Search
					</TD>
					<TD class="NavigationPaneHeader" style="color:white; text-align:right; "><A style="font-weight:normal;font-size: 10;color:white;text-decoration:underline;" href="javascript:ExpandFind();"><IMG name="imgExpandContract" alt="More Options" align="absmiddle" src="/mcm/default/localized/en-us/images/chevrondown.gif" border="0"></A>
					</TD>
				</TR>
				<TR>

					<TD class="NavigationPaneItem" colspan="2">
						<DIV id='FindContracted' style='float:left;'>
							<TABLE border="0" width="100%">
								<TR valign="middle">
									<TD align='right'><MDMLABEL name="TEXT_FIELD_NAME">Name</MDMLABEL>:
									</TD>
									<TD>										
										<TABLE border="0" width="100%">
											<TR>
												<TD align="left">													
													<INPUT Value=""  MaxLength="255"  type="text" Name='FIND_NAME' style="width:150px;" class="clsFindInputBox" dropEvent="GetFieldID">
												</TD>
												<TD class="NavigationPaneItem" align="right">	&nbsp;&nbsp;&nbsp;													
													<A name='aGo' href="javascript:DoFind();">Find</A>
												</TD>
											</TR>
										</TABLE>
                  </TD>
								</TR>
							</TABLE>
						</DIV>
						<DIV id='FindExpanded' style='float:left;'>
							<TABLE border="0" width="100%">
								<TR valign="middle">
									<TD align='right'><MDMLABEL name="TEXT_FIELD_NAME">Name</MDMLABEL>:
									</TD>
									<TD>
										<table width="100%" border="0" cellspacing="0" cellpadding="0">
											<TR>
												<TD align="left">													
													<INPUT Value=""  MaxLength="255"  type="text" Name='FIND_NAME' style="width:150px;" class="clsFindInputBox" dropEvent="GetFieldID">
												</TD>
												<TD class="NavigationPaneItem" align="right">	&nbsp;&nbsp;&nbsp;													
													<A name='aGo' href="javascript:DoFind();">Find</A>
												</TD>
											</TR>
										</TABLE>
									</TD>
									<TR>
										<TD align='right'>Description:
										</TD>
										<TD>											
											<INPUT Value=""  MaxLength="255"  type="text" name="FIND_DESCRIPTION" style="width:150px;" class="clsFindInputBox">
										</TD>
                    </TR>
										<TR>
											<TD align='right'>	Currency:
											</TD>
											<TD>
												<SELECT style="width:150px;padding-right:0px" name="FIND_CURRENCY">
												</SELECT>
											</TD>
										</TR>
									<INPUT type="hidden" Value=""  MaxLength="255"  type="text" name="FIND_PARAMTABLE_ID" style="width:150px;" class="clsFindInputBox">
													<TR class="NavigationPaneItem">
														<TD colspan="2" style="border:1px red none;padding-left:4px;padding-top:4px;"><span onClick="ExpandParamList();"><img name='imgExpandParamTableList' align='absmiddle' src='/mdm/internal/images/toolbar/arrowblueright.gif'>What param table does it have rates for?</SPAN><BR>
															<DIV id="ParamTableSelectPanel" style='display:none;height:1500px;'>

<iframe src="[PARAMETER_TABLE_SELECTOR_DIALOG]" width="100%" height="100%" frameborder="0"></iframe>


<SCRIPT>ExpandFind(); //Set the correct state of the panel when we first display
</SCRIPT>
	</FORM>
</BODY>
</HTML>
