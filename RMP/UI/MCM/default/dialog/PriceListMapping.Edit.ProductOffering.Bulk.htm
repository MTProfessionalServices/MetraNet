<HTML>
<HEAD>
  <LINK localized="TRUE" rel="STYLESHEET" type="text/css" href="/mcm/default/localized/us/styles/styles.css">
  <LINK localized="TRUE" rel="STYLESHEET" type="text/css" href="/mcm/default/localized/us/styles/Navstyles.css">  
  <title>Bulk Update <MDMLABEL Name="TEXT_PRICELIST_MAPPING"></MDMLABEL></title>
  
  <script language="Javascript">
    function ValidateForm()
    { 
      var strMessage = '';
      var strName;
    
      strName = document.mdm.PRICELISTNAME.value;

      if ((document.mdm.UpdatePricelist.checked) && (strName.length == 0) && (!document.mdm.NonSharedPriceList(0).checked)) 
      {
        strMessage = '<MDMLABEL name="TEXT_PRICELIST_MAPPING_NO_NAME" type="caption">Price List</MDMLABEL>';
      }

      if ((!document.mdm.UpdatePricelist.checked) && (!document.mdm.UpdateICB.checked))
      {
        strMessage = 'Please select if you want Price List information to be updated, "Allow Personal Rates" information to be updated or both.\n\nCurrently, nothing has been selected to be updated.';
      }

      var checkboxes = document.mdm.paramtable_selected
	  if (typeof(checkboxes)=="undefined")
      {
        strMessage = 'This Product Offering does not contain any items. There are no pricelist mappings to update.';
      }
      else
      {
		var bParamtableSelected = false;
		if (typeof(checkboxes.length)=="undefined")
		{
			//We only have a single checkbox
			if (checkboxes.checked)
			{
			bParamtableSelected = true;
			}
		}
		else
		{
			for (i = 0; i < checkboxes.length; i++)
			{
			if (checkboxes[i].checked)
			{
			bParamtableSelected = true;
			break;
			}
			}
		}
		if (!bParamtableSelected)
		{
			strMessage = 'No parameter tables have been selected to have their Price List mapping information updated.\n\nPlease select one or more parameter tables on the left to have their mapping information updated.';
		}
      }
      
      if (strMessage.length==0)
      {
        mdm_RefreshDialog(document.mdm.OK);
      } 
      else 
      {
        alert(strMessage);
        //document.mdm.PRICELISTNAME.focus();
      } 
    }
    
    function ClearPriceListNameBox()
    {
      document.mdm.PRICELISTNAME.value = "";
    }
    
    function updateAllCheckboxes(bChecked)
    {
      var checkboxes = document.mdm.paramtable_selected
      for (i = 0; i < checkboxes.length; i++)
      {
        checkboxes[i].checked = bChecked;
      }
    }

  </script>
</HEAD>
<BODY>
<FORM name='mdm'>
<!-- The title of the dialog-->
<table border="0" cellpadding="0" cellspacing="0" width="100%" >
<tr><td Class='CaptionBar' nowrap>Bulk Update <MDMLABEL name="TEXT_PRICELIST_MAPPING">Price List Mapping</MDMLABEL></td></tr>
</table>
<br>
#MDMIF CAN_NOT_BE_MODIFIED
  <div class="clsNote"><MDMLABEL name="TEXT_WARNING_PRODUCT_OFFERING_PRICELIST_MAPPINGS_CANNOT_BE_MODIFIED">Warning</MDMLABEL></div><br>
#MDMENDIF
<table border="0" width="100%">
<tr>
<!-- Start of cell with product offering display-->
<TD valign="top" style="padding-left:10px" width="400px">
<PRODUCT_OFFERING_PARAM_TABLE_SELECTOR />
</TD>
<td width="10px">&nbsp;</td>
<!-- Start of cell with form values -->
<TD valign="top">

<div id='UpdatePricelistDiv' name='UpdatePricelistDiv' style='display: block;'>    
<fieldset>
<legend>            <INPUT Name="UpdatePricelist" Type="CheckBox">
            Update Price List Information</legend>
<br>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
    <td Class="clsStandardText" style="padding-left:20px;vertical-align: middle;" nowrap>
      <input type="radio" name="NonSharedPriceList" value="1" onclick="ClearPriceListNameBox();">
      [TEXT_NONSHARED_PRICE_LIST]
    </td>
  </tr>
  <tr><td><br></td></tr>

  <tr>
    <td Class='clsStandardText' style="padding-left:20px;vertical-align: middle;" nowrap>
      <input type="radio" name="NonSharedPriceList" value="0">
      <MDMLABEL name="PRICELISTNAME" type="caption">Price List</MDMLABEL>:&nbsp;&nbsp;
      <input class="fieldNonEditable" style="vertical-align: middle;" type="text" name="PRICELISTNAME" size="30" readonly>
      #MDMNOTIF CAN_NOT_BE_MODIFIED
      <button class="clsButtonBlueXLarge" id="BtnCounter" style="vertical-align: middle;" onclick="window.open('[PRICE_LIST_PICKER_DIALOG]?MonoSelect=TRUE&FILTER_CURRENCY=<MDMLABEL name="ProductOfferingCurrency" type="value"></MDMLABEL>&Title=TEXT_SELECT_PRICELIST_MAPPING&Parameters=PickerAddMapping|TRUE;PARAMTABLEID|99999','', 'height=400,width=600, resizable=yes, scrollbars=yes, status=yes'); return false;">
        <MDMLABEL Name="TEXT_SELECT_A_PRICE_LIST">Select Price List</MDMLABEL>&nbsp;
        <IMG localized='true' align=middle alt="" border=0 src="/mcm/default/localized/us/images/icons/arrowSelect.gif">
      </button>
      #MDMENDIF
    &nbsp;
    </td>
  </tr>
  <tr><td><br></td></tr>
  </table>
  </fieldset>
  </div>
 <br><br> 
<fieldset>
<legend>            <INPUT Name="UpdateICB" Type="CheckBox">
            Update 'Allow Personal Rates' Information</legend>
<br>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
    <td nowrap>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td width="20px">&nbsp;</td>
          <td colspan="1" nowrap align="left">
            <INPUT Name="CanICB" Type="radio" value="TRUE"><img src="/mcm/default/localized/us/images/icons/icb_allowed.gif" alt="Allows Personal Rates to be set for this item" border="0" align="absmiddle" />
            <MDMLABEL Name="TEXT_PRICELIST_MAPPING_CAN_ICB" Type="Caption">Can be ICBed</MDMLABEL><br>
            <INPUT Name="CanICB" Type="radio" value="FALSE"><img src="/mcm/default/localized/us/images/icons/icb_not_allowed.gif" alt="Does not allow Personal Rates to be set for this item" border="0" align="absmiddle" />
            Do not allow Personal Rates to be set
          </td>
        </tr>
      </table>
    </td>
  </tr>
  <tr><td><br></td></tr>
</table>
</fieldset>

#MDMIF CAN_NOT_BE_MODIFIED
<script>

	function disableDIV(sDivName,bDisable){
		//alert('Tring to disable div: ' + sDivName);
		var section = document.all.item(sDivName).all.tags("input");
		for (i =0; i < section.length; i++) {
			section.item(i).disabled= bDisable;
		}

		var section = document.all.item(sDivName).all.tags("select");
		for (i =0; i < section.length; i++) {
			section.item(i).disabled= bDisable;
		}

		var section = document.all.item(sDivName).all.tags("td");
		sColor =  (bDisable) ? 'gray' : 'black';
		for (i =0; i < section.length; i++) {
			//section.item(i).class = 'clsStandardTextDisabled';
			section.item(i).style.color = sColor;
		}
	}
	
  disableDIV("UpdatePricelistDiv",true);
		
</script>  
#MDMENDIF

<br><br>
<div align="center"><!-- Dialog Buttons -->
  <button Class='clsButtonXXLarge' name="OK" onclick="ValidateForm();">Update Selected Price List Mappings</button>&nbsp;&nbsp;&nbsp;<br><br>
  <button Class='clsOKButton' name="CANCEL" onclick="javascript:window.close();">Close</button>
</div>
<br><br>
</form></body></html>

