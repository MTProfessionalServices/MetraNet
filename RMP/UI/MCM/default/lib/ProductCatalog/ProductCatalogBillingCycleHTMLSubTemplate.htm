  <!-- Billing Cycle HTML Sub Template Begin -->
<!--tr>        
<td colspan=2 align="left" valign="top">
</td>
</tr>
</table-->
<fieldset style="width=100px;">
  <legend style='font-size: 11px;font-weight: bold;'>
    <MDMLABEL Name="TEXT_PC_CYCLE_TITLE" Type="Value"></MDMLABEL>
  </legend>
  <table border="0">
  <!-- BEGIN same as billing cycle -->
     <tr>
      <td colspan="2" style='font-size: 11px;' nowrap>
        <input type="radio" name="CycleMode" value="1" onClick="showRelative();handleCycleConfigurationDataChange();">
       <MDMLABEL Name="TEXT_PC_CYCLE_SAME_AS_SUBSCRIBER_BILLING_CYCLE" Type="Value"></MDMLABEL>
      </td>
    </tr>
    <tr>
      <td>
<div id="Relative" name="Relative" style="display: block;">
<table>
  <tr>
      <td width="40px"></td>        
      <td nowrap class="clsStandardTextDisabled">
                #MDMIf ShowConstrainBillingCycleCheckbox <input type="checkbox" Name="ConstrainBillingCycle">
#MDMEndIf
<MDMLABEL Name="TEXT_PC_CYCLE_REQUIRE_CYCLE_IS" Type="Value"></MDMLABEL>
                <select class="clsInputBox" Name="Cycle@BillingCycleTypeID" onChange="adjustRelativeConstraint();handleCycleConfigurationDataChange();">
                </select>
      </td>              
  </tr>      
</table>
</div>  
      </td>
    </tr>
<!-- END billing cycle relative -->
    <!-- BEGIN Extended Billing Cycle Relative (or "aligned to subscriber's billing cycle" -->
    #MDMIf ShowExtendedBillingCycleOption
    <tr>
      <td colspan="2" style='font-size: 11px;' nowrap>
        <input type="radio" name="CycleMode" value="3" onClick="showExtendedRelative();handleCycleConfigurationDataChange();">
        <MDMLABEL Name="TEXT_PC_CYCLE_ALIGNED_TO_SUBSCRIBER_BILLING_CYCLE" Type="Value"></MDMLABEL>
      </td>
    </tr>
    <tr>
      <td>
        <div id="ExtendedRelative" name="ExtendedRelative" style="display: block;">
          <table ID="Table1">
            <tr>
              <td width="40px"></td>
              <td nowrap class="clsStandardTextDisabled">
                <MDMLABEL Name="TEXT_PC_CYCLE_ALIGNED_OCURRING" Type="Value"></MDMLABEL>
                <select class="clsInputBox" Name="Cycle@EBCRBillingCycleTypeID" onChange="handleCycleConfigurationDataChange();" ID="Select2">
                </select>
              </td>
            </tr>
          </table>
        </div>
      </td>
    </tr>
    #MDMEndIf 
    <!-- END Extended Billing Cycle Relative -->
<!-- BEGIN fixed cycle -->
  <tr>
  <!--td align="right" valign="top">&nbsp;</td-->
      <td colspan="2" style='font-size: 11px;' nowrap>
        <INPUT Type='Radio' Name="CycleMode" Value="0" onclick="showFixed();handleCycleConfigurationDataChange();">
     <MDMLABEL Name="TEXT_PC_CYCLE_FIXED_CYCLE" Type="Value"></MDMLABEL>
      </td>
    </tr>
    <tr>
      <td>
    <div id="Fixed" name="Fixed" style="display: block;">
<table>
 <tr>        
	 <td class='captionEWRequired' width="20px"></td>
              <td nowrap>
                <INPUT Name="Cycle__CycleTypeID" Type='Radio' Value="[BILLING_CYCLE_DAILY]" onClick="handleCycleConfigurationDataChange();">
      <MDMLABEL Name="TEXT_PC_CYCLE_DAILY" Type="Value"></MDMLABEL>
 	 </td>
 </tr>
 <tr> 
	 	<td></td>
    <td  nowrap><INPUT Name="Cycle__CycleTypeID" Type='Radio' Value="[BILLING_CYCLE_WEEKLY]" onClick="handleCycleConfigurationDataChange();">
        <MDMLABEL Name="TEXT_PC_CYCLE_WEEKLY" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;                   
        <MDMLABEL Name="TEXT_PC_CYCLE_WEEKLY_LABEL1" Type="Value"></MDMLABEL>&nbsp;&nbsp;         
                <SELECT Name="Cycle__EndDayOfWeek" Class='clsInputBox'>
                </SELECT>
	   </td>
 </tr>   
  <tr>
     <td></td>
	    <td nowrap>
   	      <INPUT Name="Cycle__CycleTypeID" Type='Radio' Value="[BILLING_CYCLE_BI_WEEKLY]" onClick="handleCycleConfigurationDataChange();">
           <MDMLABEL Name="TEXT_PC_CYCLE_BIWEEKLY" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;
                <SELECT Name="Cycle@BiWeeklyComBox" Class='clsInputBox'>
                </SELECT>
   	   </td>
	</tr>
	<tr>
      <td></td>
   	  <td nowrap>
    		  <INPUT Name="Cycle__CycleTypeID" Type='Radio' Value="[BILLING_CYCLE_SEMI_MONTHLY]" onClick="handleCycleConfigurationDataChange();">
          <MDMLABEL Name="TEXT_PC_CYCLE_SEMIMONTHLY" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;
          <MDMLABEL Name="TEXT_PC_CYCLE_SEMIMONTHLY_LABEL1" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp; 
                <SELECT Name="Cycle@EndDayOfMonth_SemiMonthly" Class='clsInputBox'>
                </SELECT>&nbsp;&nbsp;
          <MDMLABEL Name="TEXT_PC_CYCLE_SEMIMONTHLY_LABEL2" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp; 
                <SELECT Name="Cycle__EndDayOfMonth2" Class='clsInputBox'>
                </SELECT>
    	 </td>      
	 </tr>
	 <tr>
      <td></td>
   	 	<td nowrap>
   	    <INPUT Name="Cycle__CycleTypeID" Type='Radio' Value="[BILLING_CYCLE_MONTHLY]" onClick="handleCycleConfigurationDataChange();">
        <MDMLABEL Name="TEXT_PC_CYCLE_MONTHLY" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;
        <MDMLABEL Name="TEXT_PC_CYCLE_MONTHLY_LABEL1" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;         
                <SELECT Name="Cycle@EndDayOfMonth_Monthly" Class='clsInputBox'>
                </SELECT>
   	  </td>
	 </tr>
	 <tr>
      <td></td>
      <td nowrap>
         <INPUT Name="Cycle__CycleTypeID" Type='Radio' Value="[BILLING_CYCLE_QUATERLY]" onClick="handleCycleConfigurationDataChange();">
         <MDMLABEL Name="TEXT_PC_CYCLE_QUARTERLY" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;         
         <MDMLABEL Name="TEXT_PC_CYCLE_QUARTERLY_LABEL1" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;                 
                <SELECT Name="Cycle@StartMonth_Quarterly" Class='clsInputBox'>
                </SELECT>&nbsp;&nbsp;&nbsp;
         <MDMLABEL Name="TEXT_PC_CYCLE_QUARTERLY_LABEL2" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;                 
                <SELECT Name="Cycle@StartDay_Quarterly" Class='clsInputBox'>
                </SELECT>
	    </td>      
  </tr>
	 <tr>
      <td></td>
      <td nowrap>
         <INPUT Name="Cycle__CycleTypeID" Type='Radio' Value="[BILLING_CYCLE_ANNUALLY]" onClick="handleCycleConfigurationDataChange();"><MDMLABEL Name="TEXT_PC_CYCLE_ANNUAL" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;
         <MDMLABEL Name="TEXT_PC_CYCLE_ANNUAL_LABEL1" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;                 
                <SELECT Name="Cycle@StartMonth_Annual" Class='clsInputBox'>
                </SELECT>&nbsp;&nbsp;&nbsp;
         <MDMLABEL Name="TEXT_PC_CYCLE_ANNUAL_LABEL2" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;                 
                <SELECT Name="Cycle@StartDay_Annual" Class='clsInputBox'>
                </SELECT>
	    </td>      
  </tr>
  	 <tr>
      <td></td>
      <td nowrap>
         <INPUT Name="Cycle__CycleTypeID" Type='Radio' Value="[BILLING_CYCLE_SEMIANNUALLY]" onClick="handleCycleConfigurationDataChange();"><MDMLABEL Name="TEXT_PC_CYCLE_SEMIANNUAL" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;
         <MDMLABEL Name="TEXT_PC_CYCLE_SEMIANNUAL_LABEL1" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;                 
                <SELECT Name="Cycle@StartMonth_SemiAnnual" Class='clsInputBox'>
                </SELECT>&nbsp;&nbsp;&nbsp;
         <MDMLABEL Name="TEXT_PC_CYCLE_SEMIANNUAL_LABEL2" Type="Value"></MDMLABEL>&nbsp;&nbsp;&nbsp;                 
                <SELECT Name="Cycle@StartDay_SemiAnnual" Class='clsInputBox'>
                </SELECT>
	    </td>      
  </tr>
</table>
</div>
      </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
<!-- END fixed cycle -->
</table>
</fieldset>
  <script language="JavaScript1.2">
     
     // default is fixed
  	 //document.getElementById("Fixed").style.display = "block";
  	 //document.getElementById("Relative").style.display = "none"; 
    
     //This is a dummy function that can be overloaded on a particular page to handle 
     //when the Cycle information has changed. Declare this function again on your page for custom handling
     function handleCycleConfigurationDataChange()
     {
        //alert("handleCycleConfigurationDataChange");
     }
     
     function disableDIV(sDivName,bDisable){
     
      var sColor =  (bDisable) ? 'gray' : 'black';
      var section = document.all.item(sDivName).all.tags("input");
        for (i =0; i < section.length; i++) {
          section.item(i).disabled= bDisable;
        }
        
      var section = document.all.item(sDivName).all.tags("select");
        for (i =0; i < section.length; i++) {
          section.item(i).disabled= bDisable;
        }

      var section = document.all.item(sDivName).all.tags("td");
        
        for (i =0; i < section.length; i++) {
          //section.item(i).class = 'clsStandardTextDisabled';
          section.item(i).style.color = sColor;
        }

        document.all.item(sDivName).style.color = sColor;        
     }
           
     function showFixed(){
        //window.alert("Here"); 
    		//document.getElementById("Fixed").style.display = "block";
    		//document.getElementById("Relative").style.display = "none";
        if(eval('document.all.item("ConstrainBillingCycle")') != null)
          document.all.item("ConstrainBillingCycle").checked = false;
        //document.all.item("Cycle@BillingCycleTypeID").value = 0;
        disableDIV('Fixed',false);
        disableDIV('Relative',true);

        // For the new EBCR functionality - let's check if the div exists, because for agg. charges and discounts it will not be drawn
        if (document.all.item('ExtendedRelative') != null)
          disableDIV('ExtendedRelative',true);
     }
      
     function showRelative(){
  	  	//document.getElementById("Fixed").style.display = "none";
  		  //document.getElementById("Relative").style.display = "block";      
        disableDIV('Fixed',true);
        disableDIV('Relative',false);
        
        // For the new EBCR functionality - let's check if the div exists, because for agg. charges and discounts it will not be drawn
        if (document.all.item('ExtendedRelative') != null)
          disableDIV('ExtendedRelative',true);
     }

     function showExtendedRelative(){
  	  	//document.getElementById("Fixed").style.display = "none";
  		  //document.getElementById("Relative").style.display = "block";      
        disableDIV('Fixed',true);
        disableDIV('Relative',true);

        // For the new EBCR functionality - let's check if the div exists, because for agg. charges and discounts it will not be drawn
        if (document.all.item('ExtendedRelative') != null)
          disableDIV('ExtendedRelative',false);
     }
     
     function adjustRelativeConstraint(){
        if (false && document.all.item("ConstrainBillingCycle") != null)  {
          document.all.item("ConstrainBillingCycle").checked = true;
        }
     }

      // If we are in edit mode, enable and disable the cycle fields appropriately
     // (Currently we are using the existance of the 'Edit' button or the existence of a field 'EditMode' with a value of false to determine if we are in edit mode or not)
     //window.alert("Edit Mode[" + (document.all.item("EditItem") == null) + "]");
     if ((document.all.item("EditItem") != null) || ((document.mdm.EditMode) && (document.mdm.EditMode.value == "false")))
     {
       //We are not in edit mode
     }
     else
     {
       //window.alert("Adjusting state");
       if (document.mdm.CycleMode[0].checked == true) // BCR
        showRelative();
       // CycleMode[1] can be either EBCR (aligned) or Fixed, depending on wether EBCR is an option for this priceable item - hence we need to check how many options are there
       else if ((document.mdm.CycleMode[1].checked == true) && (document.mdm.CycleMode.length == 3)) // This equates to EBCR
        showExtendedRelative();
       else // If it is not EBCR and it is not BCR, then it must be fixed       
        showFixed();
     }
   </script>  
