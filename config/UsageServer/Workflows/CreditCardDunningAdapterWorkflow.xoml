<ns0:CreditCardDunningAdapterWorkflow SecurityContext="{p1:Null}" x:Name="CreditCardDunningAdapterWorkflow" ExecutionContext="{x:Null}" EventName="{x:Null}" ConfigFile="{x:Null}" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/workflow" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:p1="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:ns0="clr-namespace:MetraTech.Core.Workflows;Assembly=MetraTech.Core.Workflows">
	<CodeActivity x:Name="LoadConfig" ExecuteCode="{ActivityBind CreditCardDunningAdapterWorkflow,Path=LoadConfiguration_ExecuteCode}" />
	<CodeActivity x:Name="LoadFailedPayments" ExecuteCode="{ActivityBind CreditCardDunningAdapterWorkflow,Path=LoadFailedPayments_ExecuteCode}" />
	<CodeActivity x:Name="SubmitBatchPaymentRequests" ExecuteCode="{ActivityBind CreditCardDunningAdapterWorkflow,Path=SubmitPaymentRequests_ExecuteCode}" />
	<WhileActivity x:Name="ForEachRequestResult">
		<WhileActivity.Condition>
			<CodeCondition Condition="{ActivityBind CreditCardDunningAdapterWorkflow,Path=ForEachRequestResult_Condition}" />
		</WhileActivity.Condition>
		<IfElseActivity x:Name="ResultCondition">
			<IfElseBranchActivity x:Name="RequestSucceded">
				<IfElseBranchActivity.Condition>
					<RuleConditionReference ConditionName="RequestResultCondition" />
				</IfElseBranchActivity.Condition>
				<CodeActivity x:Name="MarkFailedPaymentRecordSuccessful" ExecuteCode="{ActivityBind CreditCardDunningAdapterWorkflow,Path=MarkFailedPaymentRecordSuccessful_ExecuteCode}" />
			</IfElseBranchActivity>
			<IfElseBranchActivity x:Name="RequestFailed">
				<IfElseActivity x:Name="RetryStatus">
					<IfElseBranchActivity x:Name="RetriesAvailable">
						<IfElseBranchActivity.Condition>
							<RuleConditionReference ConditionName="RetryStatusCondition" />
						</IfElseBranchActivity.Condition>
						<IfElseActivity x:Name="EmailSet">
							<IfElseBranchActivity x:Name="EmailIsSet">
								<IfElseBranchActivity.Condition>
									<CodeCondition Condition="{ActivityBind CreditCardDunningAdapterWorkflow,Path=IsEmailSet_Condition}" />
								</IfElseBranchActivity.Condition>
								<CodeActivity x:Name="EmailFailureNotice" ExecuteCode="{ActivityBind CreditCardDunningAdapterWorkflow,Path=SendFailureNotification_ExecuteCode}" />
							</IfElseBranchActivity>
						</IfElseActivity>
					</IfElseBranchActivity>
					<IfElseBranchActivity x:Name="RetriesExhausted">
						<IfElseActivity x:Name="EmailSet2">
							<IfElseBranchActivity x:Name="EmailIsSet2">
								<IfElseBranchActivity.Condition>
									<CodeCondition Condition="{ActivityBind CreditCardDunningAdapterWorkflow,Path=IsEmailSet_Condition}" />
								</IfElseBranchActivity.Condition>
								<CodeActivity x:Name="EmailFinalNotice" ExecuteCode="{ActivityBind CreditCardDunningAdapterWorkflow,Path=SendFinalNotification_ExecuteCode}" />
							</IfElseBranchActivity>
						</IfElseActivity>
						<CodeActivity x:Name="DisableSubscription" ExecuteCode="{ActivityBind CreditCardDunningAdapterWorkflow,Path=DisableSubscription_ExecuteCode}" />
					</IfElseBranchActivity>
				</IfElseActivity>
				<CodeActivity x:Name="UpdateFailedPaymentRecord" ExecuteCode="{ActivityBind CreditCardDunningAdapterWorkflow,Path=UpdateFailedPaymentRecord_ExecuteCode}" />
			</IfElseBranchActivity>
		</IfElseActivity>
	</WhileActivity>
</ns0:CreditCardDunningAdapterWorkflow>