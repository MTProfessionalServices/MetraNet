<?xml version="1.0" encoding="utf-8"?>
<xmlconfig>
    <version ptype="INTEGER">2</version>
    <ScheduledAdapters>
    <!--Adapter>
      <Name>GenerateAnalyticsDatamart</Name>
      <DisplayName>Generate and/or Populate Analytics Data Mart</DisplayName>
      <ClassID>MetraTech.UsageServer.Adapters.AnalyticsDatamartAdapter,MetraTech.UsageServer.Adapters</ClassID>
      <ConfigFile>GenerateAnalyticsDatamart.xml</ConfigFile>
      <Description>
      <![CDATA[
        Generates the and/or populates the Analytics Data Mart
      ]]>
      </Description>
	  <RecurrencePattern>
		<SystemCycle>Daily</SystemCycle>
	  </RecurrencePattern>
    </Adapter-->

        <!--
    <Adapter>
      <Name>MaterializedViewAdapter</Name>
      <DisplayName>Populate Materialized Views (Scheduled)</DisplayName>
      <ClassID>MetraTech.UsageServer.Adapters.MaterializedViewAdapter,MetraTech.UsageServer.Adapters</ClassID>
      <ActivationDate>10/1/2002 00:00:00</ActivationDate>
      <Description>
        <![CDATA[
       	This adapter is responsible for populating Materialized Views configured in DEFERRED mode
        ]]>
      </Description>
      <RecurrencePattern>
        <IntervalInMinutes>300</IntervalInMinutes>
      </RecurrencePattern>
    </Adapter>
-->
        <Adapter>
            <Name>AccountStateAdapterSCH</Name>
            <DisplayName>Generic Change Account State Adapter (Scheduled)</DisplayName>
            <ClassID>MetraTech.UsageServer.Adapters.AccountStateAdapter,MetraTech.UsageServer.Adapters</ClassID>
            <ConfigFile>AccountStateAdapter.xml</ConfigFile>
            <ActivationDate>10/1/2002 00:00:00</ActivationDate>
            <Description><![CDATA[
       	This adapter is responsible for changing states of accounts from 
       	closed to pending final bill and Closed to Archived. The rules are:
        <BR>Closed To Pending Final Bill: 
        This operation gets triggered when there is usage that comes in as 
        either late usage or as part of a straggler to an account that is 
        in closed state. End of period processing detects this changes the 
        account state to Pending Final Bill.
        <BR>Closed To Archived:
        This transition happens when an account has aged x number of months
        (configurable) after being Closed.  End of period processing detects 
        that changes the account state to Archived.
        ]]></Description>
            <RecurrencePattern>
                <SystemCycle>Daily</SystemCycle>
            </RecurrencePattern>
        </Adapter>
        <!-- Product Catalog NonRecurring Charges -->
        <Adapter>
            <Name>NonRecurringCharges</Name>
            <DisplayName>NonRecurring Charge Adapter</DisplayName>
            <ClassID>Metratech.MTNonRecurringChargeAdapter.1</ClassID>
            <ConfigFile>NonRecurringCharges.xml</ConfigFile>
            <ActivationDate>10/1/2002 00:00:00</ActivationDate>
            <Description>
        MetraTech standard adapter to generate non-recurring charges from
        the product catalog. This adapter will generate the appropriate subscription
        and unsubscription charges for subscription events that occurred for the period
        in which the adapter is run.
      </Description>
            <RecurrencePattern>
                <SystemCycle>Daily</SystemCycle>
            </RecurrencePattern>
        </Adapter>
        <Adapter>
            <Name>FailedTransaction</Name>
            <DisplayName>Delete Dismissed Failed Transactions</DisplayName>
            <ClassID>MetraTech.UsageServer.Adapters.FailedTransactionAdapter,MetraTech.UsageServer.Adapters</ClassID>
            <ConfigFile>DeleteFailedTransactions.xml</ConfigFile>
            <ActivationDate>10/1/2002 00:00:00</ActivationDate>
            <Description><![CDATA[
        MetraTech standard adapter to delete failed transactions a certain number of days after they have
        been marked as dismissed. This adapter will also delete successfully resubmitted transactions a
        certain number of days after they have been resubmitted.
      ]]></Description>
            <RecurrencePattern>
                <SystemCycle>Daily</SystemCycle>
            </RecurrencePattern>
        </Adapter>
        <!-- Product Catalog Discounts -->
        <!--<Adapter>
            <Name>ScheduledDiscounts</Name>
            <DisplayName>Discount Adapter</DisplayName>
            <ClassID>Metratech.MTDiscountAdapter.1</ClassID>
            <ConfigFile>Discounts.xml</ConfigFile>
            <ActivationDate>10/1/2002 00:00:00</ActivationDate>
            <Description>
        Generates non billing cycle relative group discounts for discount intervals ending between the given timespan.
      </Description>
            <Dependencies>
                <DependsOn>NonRecurringCharges</DependsOn>
            </Dependencies>
            <RecurrencePattern>
                <SystemCycle>Daily</SystemCycle>
            </RecurrencePattern>
        </Adapter> -->

        <Adapter>
            <Name>PipelineFailoverAdapter</Name>
            <DisplayName>Pipeline Failover Adapter</DisplayName>
            <ClassID>MetraTech.UsageServer.Adapters.PipelineFailoverAdapter,MetraTech.UsageServer.Adapters</ClassID>
            <ConfigFile>PipelineFailoverAdapter.xml</ConfigFile>
            <ActivationDate>10/1/2002 00:00:00</ActivationDate>
            <Description>Resubmits failed transactions that failed due to db cluster failover, network error or other rerunable database error.</Description>
            <RecurrencePattern>
                <IntervalInMinutes>60</IntervalInMinutes>
            </RecurrencePattern>
        </Adapter>
		<Adapter>
			<Name>CleanupAdapter</Name>
			<DisplayName>Failed Payment Cleanup Adapter </DisplayName>
			<ClassID>MetraTech.UsageServer.Adapters.CleanupFailedTransactionsAdapter,MetraTech.UsageServer.Adapters</ClassID>
			<ConfigFile>CleanupAdapter.xml</ConfigFile>
			<ActivationDate>10/1/2002 00:00:00</ActivationDate>
			<Description>
				Cleanup and void failed transactions.
			</Description>
			<RecurrencePattern>
				<IntervalInMinutes>60</IntervalInMinutes>
			</RecurrencePattern>
		</Adapter>
    </ScheduledAdapters>
    <EndOfPeriodAdapters>
       <Adapter>
            <Name>DeletePendingNonStandardChargesAdapter</Name>
            <DisplayName>Delete Pending NonStandard Charges Adapter</DisplayName>
            <ClassID>MetraTech.UsageServer.Adapters.DeletePendingNonStandardChargesAdapter,MetraTech.UsageServer.Adapters</ClassID>
            <ConfigFile>DeletePendingNonStandardChargesAdapter.xml</ConfigFile>
            <Description>MetraTech standard adapter deleting unmanaged pending non standard charges</Description>
            <RecurrencePattern>
                <UsageCycleType>All</UsageCycleType>
            </RecurrencePattern>
        </Adapter>
        <!-- Product Catalog Recurring Charges -->
      <Adapter>
            <Name>RecurringCharges</Name>
            <DisplayName>Recurring Charge Adapter</DisplayName>

            <ClassID>MetraTech.UsageServer.Adapters.StatefulRecurringChargeAdapter</ClassID>
            <ConfigFile>StatefulRecurringCharges.xml</ConfigFile>

            <Description>
        MetraTech standard adapter to generate recurring charges from the
        product catalog for this interval.
      </Description>
            <RecurrencePattern>
                <UsageCycleType>All</UsageCycleType>
            </RecurrencePattern>
        </Adapter>


        <!-- Product Catalog Aggregate Charges -->
        <!-- <Adapter>
            <Name>AggregateCharges</Name>
            <DisplayName>Aggregate Charge Adapter</DisplayName>
            <ClassID>Metratech.MTAggRateAdapter.1</ClassID>
            <ConfigFile>AggregateCharges.xml</ConfigFile>
            <Description>
        MetraTech standard adapter to process aggregate rating for aggregate
        rated priceable items for this interval. This is accomplished by
        remetering usage date for these priceable items for this interval to
        the second pass service along with the appropriate aggregate counters.
      </Description>
            <RecurrencePattern>
                <UsageCycleType>All</UsageCycleType>
            </RecurrencePattern>
            <Dependencies>
                <DependsOn>RecurringCharges</DependsOn>
            </Dependencies>
        </Adapter> -->
        <!-- Product Catalog Discounts -->
        <!--<Adapter>
            <Name>Discounts</Name>
            <DisplayName>Discount Adapter</DisplayName>
            <ClassID>Metratech.MTDiscountAdapter.1</ClassID>
            <ConfigFile>Discounts.xml</ConfigFile>
            <Description>
        MetraTech standard adapter to process discounts from the product catalog.
      </Description>
            <RecurrencePattern>
                <UsageCycleType>All</UsageCycleType>
            </RecurrencePattern>
            <Dependencies>
                <DependsOn>AggregateCharges</DependsOn>
                <DependsOn>NonRecurringCharges</DependsOn>
            </Dependencies>
        </Adapter> -->
        <!-- PayerChange -->
        <Adapter>
            <Name>PayerChange</Name>
            <DisplayName>Payer Change Adapter</DisplayName>
            <ClassID>MetraTech.AR.Adapters.PayerChangeAdapter,MetraTech.AR.Adapters</ClassID>
            <ConfigFile>PayerChangeAdapter.xml</ConfigFile>
            <Description>
        Move balances and unbilled charges for non-billable accounts to their payer. If AR is enabled the balances will be moved in AR as well.
      </Description>
            <RecurrencePattern>
                <UsageCycleType>All</UsageCycleType>
            </RecurrencePattern>
            <Dependencies>
                <DependsOn>Aggregate Metrics Processor (Scheduled)</DependsOn>
                <DependsOn>Aggregate Metrics Processor (EOP)</DependsOn>
            </Dependencies>
        </Adapter>
        <Checkpoint>
            <Name>Phase1Checkpoint</Name>
            <DisplayName>Phase 1 Checkpoint</DisplayName>
            <RecurrencePattern>
                <UsageCycleType>All</UsageCycleType>
            </RecurrencePattern>
            <Dependencies>
                <DependsOn>PayerChange</DependsOn>
            </Dependencies>
            <Description>This is a example checkpoint in the End Of Period processing. Processing will stop at this point until the checkpoint is manually completed. Currently this allows verfication of the processing of usage that has happened before invoices are generated.</Description>
        </Checkpoint>
        <!-- Materialized Views EOP adapter
	<Adapter>
      <Name>MaterializedViewAdapterEOP</Name>
  	  <DisplayName>Populate Materialized Views (EOP)</DisplayName>
	  <ClassID>MetraTech.UsageServer.Adapters.MaterializedViewAdapter,MetraTech.UsageServer.Adapters</ClassID>
      <Description>
        <![CDATA[
		This adapter is responsible for populating Materialized Views configured in DEFERRED mode
        ]]>
      </Description>
      <RecurrencePattern>
         <UsageCycleType>All</UsageCycleType>
      </RecurrencePattern>
      <Dependencies>
        <DependsOn>Phase1Checkpoint</DependsOn>
      </Dependencies>
    </Adapter>
-->
        <!-- Invoices -->
        <Adapter>
            <Name>Invoices</Name>
            <DisplayName>Invoice Adapter</DisplayName>
            <ClassID>MetraTech.UsageServer.Adapters.InvoiceAdapter,MetraTech.UsageServer.Adapters</ClassID>
            <ConfigFile>CreateInvoices.xml</ConfigFile>
            <Description>
		MetraTech standard adapter for generating invoices.
	</Description>
            <RecurrencePattern>
                <UsageCycleType>All</UsageCycleType>
            </RecurrencePattern>
            <Dependencies>
                <!-- When MaterializedView support is enabled comment our Phase1Checkpoint
		 dependency and uncomment MaterializedViewAdapterEOP dependency -->
                <!--		<DependsOn>MaterializedViewAdapterEOP</DependsOn> -->
                <DependsOn>Phase1Checkpoint</DependsOn>
            </Dependencies>
        </Adapter>
        <Adapter>
            <Name>EmailAdapter</Name>
            <DisplayName>Email Adapter</DisplayName>
            <ClassID>MetraTech.UsageServer.Adapters.EmailAdapter,MetraTech.UsageServer.Adapters</ClassID>
            <ConfigFile>EmailAdapterConfig.xml</ConfigFile>
            <Description>
        Adapter to send emails
      </Description>
            <RecurrencePattern>
                <UsageCycleType>All</UsageCycleType>
            </RecurrencePattern>
            <Dependencies>
                <DependsOn>Invoices</DependsOn>
            </Dependencies>
        </Adapter>
        <Adapter>
            <Name>AccountStateAdapterEOP</Name>
            <DisplayName>Generic Change Account State Adapter (End-of-period)</DisplayName>
            <ClassID>MetraTech.UsageServer.Adapters.AccountStateAdapter,MetraTech.UsageServer.Adapters</ClassID>
            <ConfigFile>AccountStateAdapter.xml</ConfigFile>
            <ActivationDate>10/1/2002 00:00:00</ActivationDate>
            <Description><![CDATA[
       	This adapter is also responsible for changing states of accounts from 
       	pending final bill to closed. The rules are:
        <BR>Pending Final Bill To Closed: 
        This operation is interval based, i.e. it behaves like an EOP
        adapter. The transition happens when the hard closed has reached on
        that specific interval.
        ]]></Description>
            <RecurrencePattern>
                <UsageCycleType>All</UsageCycleType>
            </RecurrencePattern>
            <Dependencies>
                <DependsOn>Invoices</DependsOn>
            </Dependencies>
        </Adapter>
        <Adapter>
            <Name>DeletePendingAdjustments</Name>
            <DisplayName>Delete Pending Adjustments Adapter</DisplayName>
            <ClassID>MetraTech.Adjustments.Adapters.DeleteAdjustments,MetraTech.Adjustments.Adapters</ClassID>
            <ConfigFile>DeleteAdjustments.xml</ConfigFile>
            <Description>
        MetraTech standard adapter deleting pending adjustments
      </Description>
            <RecurrencePattern>
                <UsageCycleType>All</UsageCycleType>
            </RecurrencePattern>
        </Adapter>
        <Checkpoint>
            <Name>HardCloseCheckpoint</Name>
            <DisplayName>Hard Close Checkpoint</DisplayName>
            <RecurrencePattern>
                <UsageCycleType>All</UsageCycleType>
            </RecurrencePattern>
            <Dependencies>
                <DependsOn>AllEOP</DependsOn>
            </Dependencies>
            <Description>This is a final manual checkpoint before the interval is hard closed. Processing of the interval can be verified before it is closed. If this checkpoint is removed, the interval will automatically be 'hard closed' after successful processing of the interval.</Description>
        </Checkpoint>
    </EndOfPeriodAdapters>
</xmlconfig>