<?xml version="1.0" encoding="utf-8"?>
<xmlconfig>
    <mtsysconfigdata>
        <effective_date ptype="DATETIME">1998-11-19T00:00:00Z</effective_date>
        <timeout ptype="INTEGER">30</timeout>
        <configfiletype>CONFIG_DATA</configfiletype>
    </mtsysconfigdata>
    <mtconfigdata>
        <version ptype="INTEGER">1</version>
        <!-- First processor configuration -->
        <processor>
            <name>findparent</name>
            <progid>MetraPipeline.MTSQLBatchQuery.1</progid>
            <description>Used for finding parent account for a given account</description>
            <!-- Processor specific configuration data -->
            <configdata>
                <Program><![CDATA[
				CREATE PROCEDURE findparent
				  @_accountID INTEGER,
				  @_Timestamp DATETIME,
				  @ParentAccountID INTEGER OUTPUT
				  
				AS
        			SELECT
	          			id_ancestor
	     		INTO
	        			 @ParentAccountID 
	        
        			FROM
           				t_account_ancestor
           			 WHERE    id_descendent = @_accountID
				AND num_generations = 1 
				AND @_Timestamp BETWEEN vt_start and vt_end
            
 			]]></Program>
                <TempTable>fp</TempTable>
            </configdata>
        </processor>
    </mtconfigdata>
</xmlconfig>