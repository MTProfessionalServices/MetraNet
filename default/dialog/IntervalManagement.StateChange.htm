<HTML>
 <HEAD>
  <LINK rel="STYLESHEET" type="text/css" href="/mom/default/localized/en-us/styles/Styles.css">  
  <title>[TEXT_BG_TITLE_BILLING_GROUP_STATE]</title>
 </HEAD>

<BODY>

<FORM name="mdm">

<!-- Title Bar -->
<TABLE BORDER="0"  CELLPADDING="0" CELLSPACING="0" WIDTH="100%">
 <TR>
  <TD Class="CaptionBar" nowrap>[TEXT_BG_TITLE_BILLING_GROUP_STATE]</TD>
 </TR>
</TABLE>
<BR>
<center>

#MDMIf SHOW_INTERVAL_ACTIVE_STATE_WARNING
<TABLE width="80%" BGCOLOR="WhiteSmoke" BORDER="1" CELLSPACING="0" CELLPADDING="0" BORDERCOLOR="Black">
  <TR>
    <TD>
     <TABLE BGCOLOR="WhiteSmoke" BORDER="0" CELLSPACING="0" CELLPADDING="0" BGCOLOR="WhiteSmoke">
        <TR>
          <TD WIDTH=10 HEIGHT=16><IMG SRC="/mcm/default/localized/en-us/images/spacer.gif" WIDTH="10" HEIGHT="16" BORDER="0"></TD>
          <TD VALIGN="top"><IMG SRC="/mcm/default/localized/en-us/images/icons/warningSmall.gif" align="center" BORDER="0" >&nbsp;</TD>
          <TD >[TEXT_INTERVAL_STATE_ACTIVE_INTERVAL_WARNING]</TD>
          <TD WIDTH=10 HEIGHT=16><IMG SRC="/mcm/default/localized/en-us/images/spacer.gif" WIDTH="10" HEIGHT="16" BORDER="0"></TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<br>
#MDMENDIF 


      <div align="center">       
         <table width="600">
            <tr>
               <td class="clsTable">
                  <table class="clsDialogEditTable" cellspacing="1" cellpadding="2" width="100%">
                     <tr>
<tr>
 <td class="clsStandardTitle" colspan="8">[TEXT_BG_BILLING_GROUP_STATE_GRID_TITLE] <img src='<MDMLABEL Name="CurrentStateIcon"></MDMLABEL>' border="0" align="absmiddle" alt=""><strong><MDMLABEL Name="CurrentStateDisplayName"></MDMLABEL></strong>.
 <hr></td>
</tr>
                     </tr>
                     <tr>
                       <td align="center" class="TableHeader">
                         [TEXT_BG_GRID_TITLE_NEW_STATE]
                       </td>
                       <td align="center" class="TableHeader">
                         [TEXT_BG_GRID_TITLE_DESCRIPTION]
                       </td>
                     </tr>
                     <!--
                     <tr id="state0">
                        <td align="center" valign="top" class="TableCell">
                           <input type="radio" name="newState" value="0">
                        </td>
                        <td align="left" class="TableCell">
                           <img src="../localized/en-us/images/intervals/IntervalState0.gif" border="0" align="absmiddle" alt=""><strong>[TEXT_INTERVAL_STATE_NEW]</strong><br>[TEXT_INTERVAL_STATE_NEW_DESCRIPTION]
                        </td>
                     </tr>-->
                     <tr id="state1">
                        <td align="center" valign="top" class="TableCell">
                           <input type="radio" name="newState" value="1">
                        </td>
                        <td align="left" class="TableCell">
                           <img src="../localized/en-us/images/intervals/IntervalStateOpen.gif" border="0" align="absmiddle" alt=""><strong>[TEXT_INTERVAL_STATE_OPEN]</strong><br>[TEXT_INTERVAL_STATE_OPEN_DESCRIPTION]
                        </td>
                     </tr>
                     <!--
                     <tr id="state2">
                        <td align="center" valign="top" class="TableCell">
                           <input type="radio" name="newState" value="2">
                        </td>
                        <td align="left" class="TableCell">
                           <img src="../localized/en-us/images/intervals/IntervalState2.gif" border="0" align="absmiddle" alt=""><strong>[TEXT_INTERVAL_STATE_SOFT_CLOSE_PENDING]</strong><br>[TEXT_INTERVAL_STATE_SOFT_CLOSE_PENDING_DESCRIPTION]
                        </td>
                     </tr>
                     -->
                     <tr id="state3">
                        <td align="center" valign="top" class="TableCell">
                           <input type="radio" name="newState" value="3">
                        </td>
                        <td align="left" class="TableCell">
                           <img src='../localized/en-us/images/intervals/IntervalStateSoftClosed.gif' border="0" align="absmiddle" alt=""><strong>[TEXT_INTERVAL_STATE_SOFT_CLOSED]</strong><br>[TEXT_INTERVAL_STATE_SOFT_CLOSED_DESCRIPTION]
                        </td>
                     </tr>  
                     <!--                   
                     <tr id="state4">
                        <td align="center" valign="top" class="TableCell">
                           <input type="radio" name="newState" value="4">
                        </td>
                        <td align="left" class="TableCell">
                           <img src='../localized/en-us/images/intervals/IntervalState4.gif' border="0" align="absmiddle" alt=""><strong>[TEXT_INTERVAL_STATE_HARD_CLOSE_PENDING]</strong><br>[TEXT_INTERVAL_STATE_HARD_CLOSE_PENDING_DESCRIPTION]
                        </td>
                     </tr>  
                 
                     <tr id="state5">
                        <td align="center" valign="top" class="TableCell">
                           <input type="radio" name="newState" value="5">
                        </td>
                        <td align="left" class="TableCell">
                           <img src='../localized/en-us/images/intervals/IntervalStateHardClosed.gif' border="0" align="absmiddle" alt=""><strong>[TEXT_INTERVAL_STATE_HARD_CLOSED]</strong><br>[TEXT_INTERVAL_STATE_HARD_CLOSED_DESCRIPTION]
                        </td>
                     </tr>                     
                     -->  
</TABLE>

<BR>

<script>
function disableDIV(sDivName,bDisable){
	//alert('Tring to disable div: ' + sDivName);
	var section = document.all.item(sDivName).all.tags("input");
	  for (var i =0; i < section.length; i++) {
	    section.item(i).disabled= bDisable;
	  }
	  
	var section = document.all.item(sDivName).all.tags("select");
	  for (i =0; i < section.length; i++) {
	    section.item(i).disabled= bDisable;
	  }
	
	var section = document.all.item(sDivName).all.tags("td");
	  sColor =  (bDisable) ? 'gray' : 'black';
	  for (i =0; i < section.length; i++) {
	    //section.item(i).class = 'clsStandardTextDisabled';
	    section.item(i).style.color = sColor;
	  }
}

function hideDIV(sDivName,bDisable){
  if (bDisable)
    document.all(sDivName).style.display = 'none';
  else
    document.all(sDivName).style.display = '';
}

/*
// This array represents our state machine
var validStateChange = new Array(6)
validStateChange[0] = new Array(0,1,0,0,0,0) // For the state of New(0), the only valid next state is Open
validStateChange[1] = new Array(0,0,1,1,0,0)
validStateChange[2] = new Array(0,0,0,1,0,0)
validStateChange[3] = new Array(0,0,0,0,1,1)
validStateChange[4] = new Array(0,0,0,0,0,1)
validStateChange[5] = new Array(0,0,0,0,0,0)

var iCurrentState=[INTERVAL_STATE];
var bShowAllStates=[SHOW_ALL_INTERVAL_STATES];

if (bShowAllStates)
{
  //If we are showing all states then just disable the current state
  disableDIV("state" + iCurrentState, true);
}
else
{
  //Hide the states that are not valid choices
  for ( var i=0; i < validStateChange.length; i++ )
  {
    hideDIV("state" + i,!validStateChange[iCurrentState][i]);
  }
}

//Find the first radio button that is displayed and enabled and select it
for ( var i=0; i < validStateChange.length; i++ )
{
  if (document.all("state" + i).style.display == '')
  {
    if (!document.mdm.newState[i].disabled)
    {
      //alert("First is state " + document.mdm.newState[i].value );
      document.mdm.newState[i].checked = true;
      break;
    }
  }
}
*/

//v3.5 - Show all the states, check the Soft Closed State, and disable the other states... eventually
//may add ability to 'force' other state changes
var sCurrentState = "<MDMLABEL Name="CurrentStateDisplayName"></MDMLABEL>";

if (sCurrentState=="Open")
{
  document.mdm.newState[1].checked = true;
  disableDIV("state1", true);
}
else
{
  if (sCurrentState=="Soft Closed")
  {
    document.mdm.newState[0].checked = true;
    disableDIV("state3", true);  
  }
}
//disableDIV("state5", true);
</script>
<center>

<!-- Buttons -->
<button OnClick="mdm_RefreshDialog(this); return false;" name="ok" Class="clsOkButton">[TEXT_BG_BUTTON_OK_NAME]</button>
<button onclick="mdm_RefreshDialog(this); return false;" name="cancel" Class="clsOkButton">[TEXT_BG_BUTTON_CANCEL_NAME]</button>
</FORM>
</BODY>
</HTML>
